2011-04-21  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.7.

	* META, NEWS, conman.spec: Updated metadata for 0.2.7 release.

	* server-ipmi.c (parse_ipmi_opts): Fixed snprintf() format warning.

	* server.c (reset_console): Added cast to execl() NULL ptr arg to
	  resolve "missing sentinel in function call" warning on OpenBSD-4.7.

2011-04-20  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added support for new IPMIOPTS syntax.  (Fixes issue 5)
	* server-ipmi.c (parse_ipmi_opts): Rewrote for new ipmiopts syntax.
	* server-ipmi.c (init_ipmi_opts, parse_ipmi_opts_v1, process_ipmi_opt,
	  is_ipmi_opt_tag, process_ipmi_opt_username,
	  process_ipmi_opt_password, process_ipmi_opt_k_g,
	  process_ipmi_opt_privilege, process_ipmi_opt_cipher,
	  process_ipmi_opt_workaround): Added.
	* server-ipmi.c (create_ipmi_obj): Added DPRINTF to dump ipmiopts.
	* server-ipmi.c (create_ipmi_ctx): Updated to use new ipmiopts.
	* server-conf.c (create_server_conf):
	  Replaced memset() of globalIpmiOpts with init_ipmi_opts().
	* server.h: Added privilegeLevel, cipherSuite, and workaroundFlags to
	  struct ipmi_opt.
	* etc/conman.conf, man/conman.conf.5.in: Documented new ipmiopts.
	* configure.ac: Updated tests to require freeipmi-1.0.4 or later.
	* conman.spec: Updated BuildRequires for freeipmi-devel.

2011-04-07  Chris Dunlap  <cdunlap@llnl.gov>

	* server.h, server-conf.c, server-ipmi.c, server-process.c,
	  server-serial.c, server-telnet.c, server-unixsock.c:
	  Moved is_ipmi_dev(), is_process_dev(), is_serial_dev(),
	  is_telnet_dev(), and is_unixsock_dev() out of server-conf.c.

2011-04-06  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac: Fixed "--enable-debug" building when CFLAGS are set.
	  Added DEBUG_CFLAGS substitution.
	* Makefile.in: Added DEBUG_CFLAGS to COMPILE_OPTS.

	* tpoll.h: Removed comma at end of tpoll_zero_t enumerator list
	  in order to build with -pedantic.

	* : Cleaned up preprocessor conditionals.

2011-04-05  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac: Combined adjacent AC_CHECK_HEADERS.

	* configure.ac: Made "--with-freeipmi" fatal if FreeIPMI not found.

	* configure.ac: Replaced AC_HELP_STRING with AS_HELP_STRING.

2011-04-04  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac: Fixed spurious quote in AC_CHECK_DECL.

	* conman.spec: Added freeipmi-devel version to BuildRequires tag.

	* server.c (main): Changed default log priority to LOG_INFO.

	* : Fixed race conditions & segfaults when using libipmiconsole.
	  Added mutex to protect against concurrent access to the ipmi_obj
	  since connect_ipmi_obj() can be invoked from either the main
	  thread or the ipmiconsole engine thread.  (Fixes issue 7)
	* configure.ac: Changed ipmiconsole autoconf tests to indirectly check
	  for FreeIPMI 1.0.3+ which fixes ipmiconsole_engine_submit() behavior.
	* server.h: Added mutex to struct ipmi_obj.
	* server-obj.c (destroy_obj): Added call to destroy ipmi mutex.
	* server-ipmi.c (create_ipmi_obj, open_ipmi_obj, disconnect_ipmi_obj,
	  connect_ipmi_obj, reset_ipmi_delay, send_ipmi_break): Added support
	  for ipmi mutex to protect the ctx, state, timer, and delay vars.
	* server-ipmi.c (disconnect_ipmi_obj, fail_ipmi_connect):
	  Removed calls to ipmiconsole_ctx_destroy().  An existing ctx
	  is now destroyed immediately before a new one is created
	  in create_ipmi_ctx().  According to Al Chu (FreeIPMI),
	  ipmiconsole_ctx_destroy() should be safe to call in these places.
	  This change is more of a precautionary measure.  With the ctx now
	  being destroyed in create_ipmi_ctx(), these other calls should
	  be redundant.
	* server-ipmi.c (create_ipmi_ctx): Destroy an existing ipmi.ctx
	  immediately before creating a new one.

2011-01-31  Chris Dunlap  <cdunlap@llnl.gov>

	* THANKS: Updated.

2011-01-26  Chris Dunlap  <cdunlap@llnl.gov>

	* configure: Autoreconf'd with autoconf-2.67.

	* : Applied patch from <marc.girard@bull.net> to add console logfile
	  lock/nolock option to toggle write lock.  (Fixes issue 6)
	* server.h: Added enableLock to struct logfile_opt.
	* server-conf.c (create_server_conf): Initialized enableLock.
	* server-logfile.c (parse_logfile_opts, open_logfile_obj):
	  Set/Test enableLock for console logfile write lock.
	* etc/conman.conf, man/conman.conf.5.in: Documented lock/nolock opt.
	* THANKS: Updated.

	* : Updated copyright date range.

2010-06-15  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.6.

	* META, NEWS, conman.spec: Updated metadata for 0.2.6 release.

	* server.h: Removed WITH_FREEIPMI #ifdef guard for CONMAN_OBJ_IPMI.
	  Replaced conditional def for is_ipmi_obj() with constant def.
	  Re-ordered is_console_obj().

	* : Ported to FreeBSD 4.7-RELEASE-p28 (i386).
	* configure.ac: Fixed AC check for socklen_t.
	* configure.ac: Added AC check for how to link against Pthreads.
	* Makefile.in: Replaced "-lpthread" with $LIBPTHREAD.
	* configure, config.h.in: Rebuilt.
	* client-sock.c, server.h, server-sock.c, server-telnet.c,
	  server-unixsock.c, util-net.c: Twiddled header includes for BSD.
	* server-obj.c (create_obj): Replaced assert for checking "type" arg
	  with runtime check against CONMAN_OBJ_LAST_ENTRY due to
	  "preprocessing directive not recognized within macro arg" warning.

2010-06-08  Chris Dunlap  <cdunlap@llnl.gov>

	* : Changed license from GPLv2+ to GPLv3+.

	* : Changed external process reconnect behavior from
	  linear-backoff with a max-count leading to a disabled state,
	  to an exponential-backoff with no max-count.  (Fixes issue 3)
	* server.h: Added process_obj delay and state, and removed count.
	  Added PROCESS_MAX_TIMEOUT.  Removed PROCESS_MAX_COUNT.
	* server.c (mux_io):
	  Added checks for process obj state when recomputing poll set.
	* server-obj.c (write_obj_data, write_to_obj):
	  Added checks for process obj state.
	* server-process.c: Revamped.  Refactored open_process_obj()
	  into disconnect_process_obj() and connect_process_obj().
	  Added check_process_prog() and reset_process_delay().

	* auxdir/config.guess, auxdir/config.sub:
	  Updated to autotools-dev-20100122.1 (Debian Squeeze).
	* auxdir/install-sh, auxdir/mkinstalldirs:
	  Updated to automake-1.11 (Debian Squeeze).

2010-06-07  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c: Added DPRINTFs to show start of various routines.

2010-06-03  Chris Dunlap  <cdunlap@llnl.gov>

	* server.h, server.c, server-obj.c, server-sock.c, server-telnet.c:
	  Renamed telnet_obj conState to state.  Renamed telnet_connect_state
	  enums from CONMAN_TELCON_* to CONMAN_TELNET_*.

2010-06-02  Chris Dunlap  <cdunlap@llnl.gov>

	* configure, config.h.in: Autoreconf'd with autoconf-2.65.

	* THANKS: Updated.

	* server-ipmi.c (complete_ipmi_connect): Tweaked ordering so IPMI state
	  is reset before a timer is added.  This should have no effect other
	  than to better mirror the other console backends.

	* server-ipmi.c (complete_ipmi_connect):
	  Applied patch from <matthieu.perotin@bull.net> to reset gotEOF flag
	  upon successful ipmiconsole connection.  (Fixes issue 2)

	* server-ipmi.c (fail_ipmi_connect):
	  Applied patch from <matthieu.perotin@bull.net> to cleanup ipmiconsole
	  ctx on failed connection attempt.  (Fixes issue 1)

2010-05-20  Chris Dunlap  <cdunlap@llnl.gov>

	* README: Added license info and homepage URL.

	* etc/conman.conf, man/conman.conf.5.in: Tweaked formatting in
	  Console Directives section.

2010-05-17  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated homepage URL and copyleft boilerplate.

2009-05-19  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.5.

	* META, NEWS: Updated for 0.2.5 release.

	* server.c (coredump_handler): Moved log_msg() to top of handler.

	* server-telnet.c (send_telnet_cmd): Suppressed unused var warning.

	* FAQ: Updated info on increasing nofile hard limit.

2009-05-18  Chris Dunlap  <cdunlap@llnl.gov>

	* man/conman.conf.5.in: Tweaked formatting.

	* server.c (coredump_handler): Set restricted umask().

2009-05-16  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c (setup_coredump, coredump_handler): Added coredumpdir
	  location to final log msg.

2009-05-14  Chris Dunlap  <cdunlap@llnl.gov>

	* META, NEWS: Updated.

	* server.c (coredump_handler): Added void cast to kill().

	* server.c (main, begin_daemonize, setup_coredump, setup_signals,
	  coredump_handler, display_configuration), server-conf
	  (create_server_conf, destroy_server_conf, parse_server_directive),
	  server.h: Added support for 'server coredump' & 'server coredumpdir'
	  config directives.
	* etc/conman.conf, man/conman.conf.5.in: Documented new directives.

	* server.c (get_sane_env): Added static keyword to function definition.

2009-05-12  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c (mux_io): Added #ifdef guard around ipmi obj test.

	* server-obj.c (read_from_obj, write_obj_data): Fixed bug with objects
	  being trapped in a gotEOF state.

	* server.c (mux_io): Fixed bug with POLLOUT being set in disconnected
	  objects having buffered data to send.

2009-05-11  Chris Dunlap  <cdunlap@llnl.gov>

	* server-telnet.c: Allowed telnet opts not recognized by TELOPT_OK
	  since my telnet.h doesn't list the newer telnet options.

2009-04-21  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.4.1.

	* META, NEWS: Updated for 0.2.4.1 release.

	* log.c, log.h: Renamed dprintf() to debug_printf().  The old function
	  name conflicted with the GNU dprintf() routine for printing to a file
	  descriptor.  Supposedly, this GNU extension will be specified in the
	  next POSIX.1 revision.  Since the old name was now causing problems
	  with gcc-4.4 builds on fc11, it has been renamed.

2009-04-14  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.4.

	* META, NEWS: Updated for 0.2.4 release.

	* conman.spec: Changed BuildRoot to work under AIX-5.2.

2009-04-09  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec: Fixed %files entry for /etc/{default,sysconfig}/conman.

	* META, NEWS: Updated for 0.2.4-0.pre2.

	* lib/exec/sun-v20z-v40z.exp: Tweaked header comments.

	* lib/exec/sun-v20z-v40z.exp: Added.

	* lib/exec/ibm-bc.exp: Tweaked header comments.

2009-04-08  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/sun-elom.exp: Tweaked header comments.

2009-04-06  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec: Tweaked %files %defattr.

	* conman.spec: Tweaked %preun & %postun init script invocation.

	* conman.spec: Tweaked %install "make install" line.

	* conman.spec: Replaced $RPM_BUILD_ROOT with %{buildroot}.

	* conman.spec: Updated %build "make" to use %{?_smp_mflags}.

	* conman.spec: Updated BuildRoot to use mktemp.

	* conman.spec: Added test for %{_initrddir}.  Updated %files.

2009-04-02  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init.in: Added Description LSB header.

	* etc/conman.init.in: Changed LSB Default-Start / Default-Stop and
	  chkconfig runlevels so daemon is not started by default.

	* etc/conman.init.in: Swapped order of CONFIG & DAEMON_ARGS vars.

2009-04-01  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec: Changed License field from "GPL" to "GPLv2+".
	  The license has always been GPLv2+, and this change is just
	  updating the RPM field.

2009-03-30  Chris Dunlap  <cdunlap@llnl.gov>

	* man/conmand.8.in: Updated security section.

	* lib/exec/sun-elom.exp:
	  Added patch from Dave Love <d.love@liverpool.ac.uk> for
	  permission-denied and in-use error patterns in Sun ELOM driver.

2009-03-26  Chris Dunlap  <cdunlap@llnl.gov>

	* log.c (log_err): Replaced void cast of write() in order to silence
	  rhel5 warning of [ignoring return value of 'write', declared with
	  attribute warn_unused_result].

	* conman.spec: Added rpm conditionals to BuildRequires for
	  freeipmi-devel and (tcp_wrappers|tcp_wrappers-devel|tcpd-devel).

	* man/conmand.8.in: Added note regarding "too many open files" errors.

2009-03-24  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/sun-elom.exp: Added patch from
	  Dave Love <d.love@liverpool.ac.uk> for Sun ELOM driver.
	* THANKS: Updated.

2009-03-02  Chris Dunlap  <cdunlap@llnl.gov>

	* conmen: Removed 0.2s delay between the spawning of each xterm.

	* conmen: Changed xterm geometry option from "-g" to "-G".
	  Added support for genders nodeattr query via "-g".

2009-02-12  Chris Dunlap  <cdunlap@llnl.gov>

	* README, conman.spec: Tweaked description.

	* META, NEWS: Updated for 0.2.4-0.pre1.

	* conman.spec: Added BuildRequires for freeipmi-devel.

	* : Updated copyright date range.

	* : Merged r758:900 (2007-08-03 to 2009-02-12) from
	  conman-0.2.1-libipmiconsole branch.  Original patch from Levi Pearson
	  <https://mail.gna.org/public/conman-users/2007-08/msg00000.html>.

2008-12-03  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.3.

	* META, NEWS: Updated for 0.2.3 release.

	* common.h: Reverted MAX_BUF_SIZE to 8192.

2008-12-02  Chris Dunlap  <cdunlap@llnl.gov>

	* util-file.c (get_dir_name): Removed redundant assert().

	* util-file.c (get_dir_name): Added len check for integer overflow.

	* util-file.c (get_dir_name): Changed len type to int.

	* server.c (open_daemon_logfile), server-conf.c (write_pidfile),
	  server-logfile.c (open_logfile_obj): Added creation of intermediate
	  directories.
	* server-conf.c (parse_server_directive): Removed code that ignored
	  LOGDIR if the directory did not already exist since intermediate
	  directories are now created.
	* etc/conman.conf, man/conman.conf.5.in: Updated documentation.
	* util-file.c, util-file.h: Added get_dir_name() and create_dirs().

2008-10-13  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/hp-lo100.exp: Added patch for HP lo100 "Lights Out 100"
	  driver from Christopher D. Maestas <cdmaestas@comcast.net>.
	* THANKS: Updated.

2008-09-03  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.2.

	* README, conman.spec: Tweaked description.

	* META, NEWS: Updated for 0.2.2 release.

	* common.h: Increased MAX_BUF_SIZE from 8192 to 10240.

2008-08-30  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/hp-ilo.exp: Increased timeout to 5s for interact block.
	  Tweaked patterns to disable "ESC (" sequence.

2008-08-28  Chris Dunlap  <cdunlap@llnl.gov>

	* inevent.c (inevent_process): Changed type of inotify event buffer
	  variable 'i' from signed to unsigned since: 0 <= i < len.

	* NEWS, THANKS: Updated.

	* lib/exec/hp-ilo.exp: Added console script for HP iLO.

	* inevent.c (_inevent_destroy): Fixed bug where the function prototype
	  had two arguments and was used as a list destructor which can take
	  only one argument.  All callers changed.
	* inevent.c (inevent_process): Removed all inevents associated with a
	  given watch descriptor upon receipt of IN_IGNORED.
	* inevent.c (inevent_remove): Changed behavior so it is not an error
	  if 'pathname' is not registered or if the inevent subsystem is down.

2008-08-25  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ibm-bc.exp: Tweaked case for "target bay is empty" pattern.
	  Added test to return "no blade in specified slot" error in response
	  to the console cmd, while allowing a "target bay is empty" response
	  to be safely ignored if encountered while incrementing bcmm_bay
	  during the telnetcfg cmds.

2008-08-24  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ibm-bc.exp: Tweaked pattern for "Command cannot be issued to
	  this target".  The new src text is "Command cannot be issued to this
	  target.  Type env -h for help on changing\r\ntargets.\r\n".
	  Truncated pattern before the first CR/LF to maintain backwards
	  compatibility.  Patch from Py Watson.

2008-08-21  Chris Dunlap  <cdunlap@llnl.gov>

	* server-telnet.c (open_telnet_obj): Reverted change from 2008-07-17
	  which broke telnet connections.  It seems the bug was in the comment.

	* inevent.c: Added FIXME for cases not handled by the current code.

	* NEWS: Updated.

	* inevent.c (inevent_process): Added DPRINTF to dump contents of
	  inotify_event struct.

	* inevent.c (_inevent_destroy): Renamed 'is_unique_wd' parmameter to
	  'is_wd_unique'.

	* inevent.c (_list_find_by_path, _list_find_by_wd,
	  _list_find_by_event): Added assert()s.

	* inevent.c: Tweaked spacing.

2008-08-20  Chris Dunlap  <cdunlap@llnl.gov>

	* inevent.c: Added comment for stubbed routines.

	* inevent.c (inevent_remove): Added comment.

	* inevent.c (inevent_remove): Removed use of inevent_loop_ptr var since
	  it was never subsequently used after being set.

	* configure.ac: Added header check for <sys/inotify.h>.
	* inevent.c, inevent.h: Added.
	* server.c (mux_io): Added checks for inevents.
	* server-unixsock.c (create_unixsock_obj): Added call to register
	  inevents for unixsock objs.
	* server-obj.c (destroy_obj): Added call to unregister inevents for
	  unixsock objs.

2008-08-14  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c: Changed type of signal handler flags to sig_atomic_t.

2008-08-12  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c (shutdown_obj): Fixed bug where bufInPtr & bufOutPtr
	  were accessed without holding guarding lock.

	* server.c (reopen_logfiles): Fixed bug where open_daemon_logfile()
	  could be invoked when conf->logFileName was NULL.

	* server.c: Removed unnecessary header wrapper.h.

2008-08-06  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c: Added volatile qualifier to signal handler flags.

2008-07-17  Chris Dunlap  <cdunlap@llnl.gov>

	* : Merged r811:816 (2008-01-10 to 2008-01-14) from conman-0.2.1-echo
	  branch for feature request to enable local echo for serial
	  connections.  However, this merge only enables echo at the client
	  and not the server (so it is not tied to serial devices, logs are
	  unaffected, etc.) -- not the ideal solution.  Note that the changes
	  from r810 have been omitted since they didn't seem to work and I was
	  unable to continue without further feedback from the user.

	* server-telnet.c (open_telnet_obj): Fixed bug where calling
	  open_telnet_obj() in the PENDING state would be misinterpreted
	  as the completion of the non-blocking connect.

	* server.c (mux_io): Added test for !gotEOF before setting POLLIN.
	* server-obj.c (read_from_obj): Set gotEOF flag upon reading EOF
	  instead of immediately calling shutdown_obj() in order to attempt
	  flushing the output buffer via write_to_obj().
	* server-obj.c (write_obj_data): Added test for unixsock state.
	* server-obj.c (write_to_obj): Added test for unixsock state.
	  When marking obj as being "dead", perform shutdown_obj() instead of
	  returning -1 and causing obj to be destroyed upon return to mux_io().
	* server-logfile.c (open_logfile_obj),
	  server-process.c (open_process_obj),
	  server-serial.c (open_serial_obj),
	  server-telnet.c (connect_telnet_obj),
	  server-unixsock.c (connect_unixsock_obj):
	  Reset gotEOF flag when (re)opening console device.

	* servers-sock.c (check_console_state): Changed test for unixsock obj
	  being marked as down.

	* server-esc.c (perform_serial_break): Added FIXME for handling
	  serial-breaks for unixsock objs.

2008-07-16  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c (format_obj_string): Fixed bug omitting "%D" conversion
	  specifier for unixsock device name.

2008-07-14  Chris Dunlap  <cdunlap@llnl.gov>

	* lex.c (lex_create): Added check for null toks.

	* server.c (open_daemon_logfile): Fixed double-free() of fp on error.

	* log.c (log_err): Fixed bug comparing array against NULL.

	* lex.c (validate_sorted_tokens): Added test for null toks.

	* server-sock.c (query_consoles_via_regex): Initialized rex to silence
	  "uninitialized use" warnings when calling regcomp(), even though that
	  parm is output-only.

	* server.c (open_daemon_logfile): Fixed potential resource leak when
	  error occurs while (re)opening daemon logfile.

	* lib/exec/ibm-bc.exp: Added case for when "target bay is empty".

	* server-conf.c (process_console): Moved test for is_unixsock_dev() to
	  the top of the if/else clause to ensure the "unix:" prefix cannot be
	  misinterpreted.

2008-07-10  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec: Added THANKS to %doc.

	* README, conman.spec: Tweaked description.

	* THANKS: Added.

	* server-telnet.c (connect_telnet_obj): Added errno to socket()
	  failure error message.
	* server-telnet.c (disconnect_telnet_obj): Moved line for state change
	  to separate it from the new timer being set.

	* : Added support for console devices using unix domain sockets.
	* server.h: Added unixsock_obj_t and related defs.
	* server.c (mux_io): Added unixsock objs to tpoll set.
	* server-conf.c (process_console): Updated to create unixsock obj.
	* server-conf.c (is_unixsock_dev): Added to parse unixsock console.
	* server-logfile.c (create_logfile_obj): Updated for unixsock obj.
	* server-logfile.c (get_console_logfile_obj): Updated for unixsock obj.
	* server-obj.c (create_obj): Updated assert of valid obj types.
	* server-obj.c (destroy_obj): Added unixsock obj destructor.
	* server-obj.c (reopen_obj): Added case to reopen unixsock obj.
	* server-sock.c (check_console_state): Added check for unixsock obj
	  to warn client if disconnected and attempt immediate reconnect.
	* server-unixsock.c: Added.
	* Makefile.in: Added server-unixsock.o.
	* man/conman.conf.5.in, etc/conman.conf: Documented "unix:" dev prefix.

2008-01-14  Chris Dunlap  <cdunlap@llnl.gov>

	* man/conman.1.in: Documented &E client esc char.

	* client-tty.c (perform_help_esc): Tweaked verbage for &E help.

	* common.c (get_tty_raw): Cleared ECHOCTL.

2008-01-11  Chris Dunlap  <cdunlap@llnl.gov>

	* client-tty.c (perform_echo_esc): Moved enableEcho toggle outside of
	  the (get|set)_tty_mode block.

2008-01-10  Chris Dunlap  <cdunlap@llnl.gov>

	* common.h, common.c, client-tty.c:
	  Added support for "&E" echoing of client input.

	* common.c (get_tty_raw): Changed settings for c_iflag & c_oflag.
	* common.c (set_tty_mode): Added FIXME comment.

2008-01-09  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated copyright date range.

2007-10-10  Chris Dunlap  <cdunlap@llnl.gov>

	* DISCLAIMER.LLNS, DISCLAIMER.UC: Updated.

2007-10-08  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init.in: Changed default start/stop runlevels.

2007-10-05  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated copyright info for LLNS.

2007-09-27  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec: Added tcp_wrappers BuildRequires for mock builds.

2007-09-10  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init.in: Fixed bug with SCRIPT_NAME not removing the
	  leading /[SK][0-9]+/, thereby causing the sysconfig file to be
	  ignored at boot (when referenced via "/etc/rc5.d/S95conman").
	* etc/conman.init.in: Fixed bug with RH_SUBSYS referencing the init
	  script name instead of the executable daemon name.

2007-07-09  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in: Fixed bug in SERVER_OBJS3 referencing server-telnet.o.

2007-05-24  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.1.

	* META, NEWS: Updated for 0.2.1 release.

2007-05-22  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ibm-bc.exp: Added pattern to handle case where user does not
	  have authority to set telnet inactivity timeout.

2007-05-19  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/cyclades-ssh.exp, lib/exec/ssh.exp:
	  Added serial-break comment to interact clause.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp:
	  Updated user/pswd comment with default password.

	* lib/exec/ibm-bc.exp: Consolidated new timeouts in interact clause.

	* lib/exec/sun-ilom.exp: Tweaked "session_override" comment.  Changed
	  behavior to prevent theft of console session if "session_override"
	  is enabled, or exit with an appropriate message otherwise.

2007-05-18  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ibm-bc.exp: Tweaked "session_override" comment.

	* lib/exec/ibm-bc.exp: Tweaked "idle_timeout" comment.

2007-05-17  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ibm-bc.exp, lib/exec/ipmiconsole.exp,
	  lib/exec/ipmitool.exp, lib/exec/ssh.exp, lib/exec/sun-ilom.exp:
	  Tweaked "connection established" message.

	* lib/exec/ibm-bc.exp, lib/exec/sun-ilom.exp:
	  Enabled "session_override" by default.

	* lib/exec/ibm-bc.exp: Updated comments.  Added "bcmm_timeout" to set
	  the telnet inactivity timeout.  Added state var to accept pattern.
	  Changed checks for unexpected prompts to continue instead of accept.
	  Changed "idle_timeout" to monitor spawned process instead of user's
	  keystrokes.  Added interact pattern to disable "ESC (" sequence from
	  stopping console and returning to BCMM.

	* lib/exec/ipmiconsole.exp, lib/exec/ipmitool.exp:
	  Changed checks for duplicate prompts to ignore instead of exit.

	* lib/exec/cyclades-ssh.exp, lib/exec/ssh.exp, lib/exec/sun-ilom.exp:
	  Specified cmdline args to spawned ssh process to use standard port
	  and disable authentication agent & X11 forwarding.

	* lib/exec/sun-ilom.exp: Removed ssh error message exception for
	  "no version information available".

	* lib/exec/sun-ilom.exp: Tweaked regex for disabling "ESC (" action.

2007-05-16  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ipmiconsole.exp, lib/exec/ipmitool.exp:
	  Added checks for duplicate prompts to generate an error.

	* lib/exec/sun-ilom.exp: Removed $connected from the accept state and
	  timeout clause since the accept state has a known pattern.

	* lib/exec/README: Added note about local customizations being lost.

	* lib/exec/ipmiconsole.exp, lib/exec/ipmitool.exp: Removed state vars
	  from the timeout clause that allowed the connection to succeed if
	  the passwords had already been sent.  These vars are not needed here
	  since the accept state has a known pattern.  This also protects
	  against error messages occasionally getting dropped after an
	  incorrect password is sent (which previously caused the timeout to
	  succeed).

	* lib/exec/cyclades-ssh.exp: Updated comments.  Changed error regex
	  to match through newline.  Added pattern to accept new host key.
	* lib/exec/cyclades-telnet.exp: Updated comments.  Changed error regex
	  to match through newline.

	* lib/exec/ipmiconsole.exp, lib/exec/ipmitool.exp: Updated comments.
	  Changed keyg lookup to only happen when pswd is also missing.
	  Changed error regex to match through newline.

	* lib/exec/ssh.exp: Updated comments.  Changed error regex to match
	  through newline.  Changed prompt regex for accept state.
	  Added pattern to accept new host key.

	* lib/exec/sun-ilom.exp: Updated comments.  Added interact pattern to
	  disable "ESC (" sequence for stopping console and returning to ILOM.

2007-05-15  Chris Dunlap  <cdunlap@llnl.gov>

	* README, conman.spec: Tweaked description.

	* configure.ac, config.h.in: Moved BROKEN_STDBOOL #ifdef to "bool.h".
	* tpoll.c: Added "bool.h" include to replace <stdbool.h>.
	* bool.h: Added.

	* NEWS: Tweaked notes for 0.2.0.

2007-05-14  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/sun-ilom.exp: Added.

2007-05-02  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.0.

	* etc/conman.init.in: Added back Description header (which had been
	  renamed to Short-Description) in order to comply with chkconfig.

	* META, NEWS: Updated for 0.2.0 release.

	* configure.ac: Added test for broken <stdbool.h>.
	* tpoll.c: Removed <stdbool.h> include in favor of AC's "config.h".

	* configure.ac: Reverted previous commit.

	* configure.ac: Added _STDC_C99 define to use <stdbool.h> on Solaris.

	* server-obj.c (format_obj_string): Cast getpid to int.

	* Makefile.in: Added support for datarootdir.

	* configure: Updated to autoconf-2.61 (Debian Etch).

	* configure.ac, config.h.in: Added <paths.h> header check (Solaris).
	* common.h: Wrapped <paths.h> include with test for HAVE_PATHS_H def.
	* server.c: Removed <paths.h> include in favor of "common.h" include
	  which checks for HAVE_PATHS_H.

	* server.c (get_sane_env): Set env var TERM=dumb (AIX).

	* server-process.c (open_process_obj): Tweaked format of DPRINTF.

	* server.c (accept_client): Fixed portability bug by forcing
	  newly-accept()d client fds to initially use blocking I/O (AIX/BSD).
	* util-file.c, util-file.h: Added set_fd_blocking().

	* server-conf.c (is_telnet_obj): Fixed bug where port number remained
	  appended to hostname.

	* server-process.c (open_process_obj): Reverted connected info
	  notification message to use basename.

	* etc/conman.init.in (service_init): Re-ordered config cleanup tweaks.

2007-05-01  Chris Dunlap  <cdunlap@llnl.gov>

	* server-process.c (open_process_obj): Replaced AF_LOCAL with AF_UNIX.

	* server-esc.c: Added <arpa/telnet.h> include for use of telnet BREAK.

	* server.h: Removed <arpa/telnet.h> include and NTELOPTS redefinition.

	* common.h: Added define for _PATH_STDPATH if missing (AIX).

	* etc/conman.init.in (log_fini): Moved LSB case into default case.

	* etc/conman.init.in (service_status): Terminated output with period.

	* etc/conman.init.in (service_status): Added comment.

	* etc/conman.init.in: Changed format of usage output.

	* etc/conman.init.in (service_status): Changed format of status output.
	  Added check for "dead" status if process not found & pidfile exists.

2007-04-30  Chris Dunlap  <cdunlap@llnl.gov>

	* server-conf.c (parse_console_directive): Fixed segfault with
	  incomplete console directive.

	* etc/conman.sysconfig: Reverted re-ordering of CONFIG & DAEMON_ARGS
	  since DAEMON_ARGS might contain $CONFIG.

	* etc/conman.init.in (log_fini): Changed output for default case.

	* etc/conman.init.in: Added support for Debian Etch & Ubuntu Edgy.
	  Updated Required-Start, Required-Stop, Should-Start, Should-Stop.
	  Renamed OPTIONS to DAEMON_ARGS.  Renamed SERVICE_NAME to SCRIPT_NAME.
	  Redirected ERRMSG to stderr.  Forced removal of PIDFILE on stop.
	  Replaced query_exec() with type.  Added log_init() and log_fini().
	* etc/conman.sysconfig: Renamed OPTIONS to DAEMON_ARGS.

2007-04-25  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/conman.exp: Removed executable svn property.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ibm-bc.exp, lib/exec/ipmiconsole.exp, lib/exec/ipmitool.exp,
	  lib/exec/ssh.exp: Tweaked documentation.

2007-04-24  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.conf: Changed keywords in examples to lowercase.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ibm-bc.exp, lib/exec/ipmiconsole.exp, lib/exec/ipmitool.exp,
	  lib/exec/ssh.exp: Added support for password database.  Restructured.

2007-04-20  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ibm-bc.exp: Tweaked comments.

2007-04-19  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ibm-bc.exp: Renamed "override" to "session_override".

	* lib/exec/ibm-bc.exp: Tweaked comments.

	* lib/exec/ibm-bc.exp: Added support for "idle_timeout".

	* lib/exec/ibm-bc.exp: Added support for "override".

	* lib/exec/ibm-bc.exp, lib/exec/ibm-hs20.exp:
	  Renamed ibm-hs20.exp to ibm-bc.exp.

2007-04-18  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c (reset_console): Disabled notify_console_objs() taking
	  place after the actual reset command is executed.

2007-04-17  Chris Dunlap  <cdunlap@llnl.gov>

	* server.h, server-conf.c: Replaced "execdir" with "execpath".
	* server-conf.c (is_telnet_dev, is_serial_dev, is_process_dev,
	  search_exec_path): Added.
	* etc/conman.conf, man/conman.conf.5.in:
	  Replaced SERVER EXECDIR keyword with SERVER EXECPATH.

	* server-process.c (open_process_obj): Changed connected info
	  notification message to use full pathname to process instead of
	  basename.  Removed warning notification message after exec() failure
	  since it happens in the child process.

2007-04-05  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c (main): Added sending SIGTERM to process group ID at exit.
	* server.c (begin_daemonize): Changed prototype to return daemonize fd
	  and pgid via pass-by-reference args.

2007-04-04  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec: Added Requires for expect.

	* Makefile.in: Changed install target to use ".new" suffix for
	  preserving local mods to config files only when the new files differ.

	* conman.spec: Tweaked %post, %preun, %postun.

	* conman.spec: Changed RPM Group.

	* Makefile.in: Changed conman.sysconfig install perms to 0644.
	  Removed default symbol stripping of conman/conmand executables.

2007-04-03  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/examples/README, lib/exec/README: Added.
	* Makefile.in: Changed 'install' target to install READMEs 0644.

	* lib/exec/cyclades-ssh.exp, lib/exec/ssh.exp:
	  Changed ssh escape char to '&'.  This also allows "&B" to fall-thru
	  and trigger an ssh-generated serial-break.

	* lib/exec/cyclades-telnet.exp, lib/exec/ibm-hs20.exp:
	  Added expect pattern to eat "telnet> send brk" output from "&B".

	* lib/exec/cyclades-telnet.exp:
	  Added support for "&B" to send a serial-break.

	* server-obj.c (write_notify_msg):
	  Fixed bug with potential buffer overrun.

	* util-str.c (replace_string):
	  Fixed bug with potential dereference of freed pointer.

	* lib/exec/cyclades-telnet.exp:
	  Added comment on native telnet support within ConMan.

	* lib/exec/ibm-hs20.exp, lib/exec/ipmiconsole.exp,
	  lib/exec/ipmitool.exp, lib/exec/ssh.exp:  Tweaked formatting.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp:
	  Added support for authtype none.

2007-04-02  Chris Dunlap  <cdunlap@llnl.gov>

	* server-process.c (open_process_obj): Closed socketpair fds on exec.

	* server-conf.c (process_config): Closed config file on exec.
	* tpoll.c (tpoll_create): Closed tpoll pipe fds on exec.

	* server.c (create_listen_socket, open_daemon_logfile):
	  Added debugging.
	* server-conf.c (process_config): Added debugging.
	* server-logfile.c (open_logfile_obj): Tweaked debugging.
	* server-obj.c (create_client_obj): Added debugging.
	* server-process.c (open_process_obj): Added debugging.
	* server-serial.c (open_serial_obj): Added debugging.
	* server-telnet.c (open_telnet_obj): Added debugging.

	* README, conman.spec: Updated description.

2007-03-30  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c (main): Sanitized environment variables.
	* server.c (get_sane_env): Added from server-process.c.
	  Added DEBUG to preserve list.
	* server.h: Removed get_sane_env() prototype.
	* server-process.c (get_sane_env): Removed.

2007-03-29  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/freeipmi.exp, lib/exec/ibm-hs20.exp, lib/exec/ipmitool.exp,
	  lib/exec/ssh.exp: Updated PATH.

	* server-process.c (open_process_obj):
	  Sanitized environment for exec().
	* server-process.c (get_sane_env): Added.
	* server.h: Added get_sane_env() prototype.

	* etc/conman.conf, man/conman.conf.5.in: Added console dev comment
	  that "host:port" connections to remote terminal-servers use the
	  telnet protocol.

2007-03-28  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.conf: Tweaked comment.
	* man/conman.conf.5.in: Added reference to /usr/lib/conman/exec dir.

	* lib/exec/ipmiconsole.exp, lib/exec/freeipmi.exp:
	  Renamed freeipmi.exp to ipmiconsole.exp.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/freeipmi.exp, lib/exec/ibm-hs20.exp, lib/exec/ipmitool.exp,
	  lib/exec/ssh.exp: Changed error message for failed spawn.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/freeipmi.exp, lib/exec/ibm-hs20.exp, lib/exec/ipmitool.exp,
	  lib/exec/ssh.exp: Added spawned pid to connection established msg.

	* lib/exec/freeipmi.exp, lib/exec/ipmitool.exp: Updated PATH.

	* lib/exec/freeipmi.exp, lib/exec/ipmitool.exp: Tweaked comments.

2007-03-27  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ipmitool.exp: Removed PATH used for testing.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/freeipmi.exp, lib/exec/ibm-hs20.exp, lib/exec/ipmitool.exp,
	  lib/exec/ssh.exp: Tweaked comments.

	* lib/exec/freeipmi.exp: Replaced use of ipmiconsole cmdline opt "-k"
	  with "-K" in order to avoid exposing key on command-line.

	* lib/exec/freeipmi.exp: Removed pattern for shell prompt since it is
	  no longer needed with the SOL-established pattern.

	* lib/exec/ipmitool.exp: Added.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/freeipmi.exp, lib/exec/ibm-hs20.exp, lib/exec/ssh.exp:
	  Tweaked comments.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp:
	  Added pattern to match error text returned by ssh/telnet.

2007-03-26  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ssh.exp: Added pattern to match error text returned by ssh.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ibm-hs20.exp, lib/exec/ssh.exp:
	  Changed behavior for cmdline-args overriding variable defaults.
	  Added check for required variables.

2007-03-22  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/freeipmi.exp: Added usage message if no args are given.
	  Removed sending additional CR after password in order to generate
	  output; this is no longer needed with the SOL-established message.

2007-03-21  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/freeipmi.exp: Added support for key-generation key "Kg".
	  Changed behavior for cmdline-args overriding variable defaults.
	  Added SOL-established pattern to avoid unnecessary timeout.
	  Added check for required variables.

2007-03-08  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/freeipmi.exp, lib/exec/ipmi.exp:
	  Renamed ipmi.exp to freeipmi.exp.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ibm-hs20.exp, lib/exec/ssh.exp: Changed PATH.

2007-03-07  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ibm-hs20.exp, lib/exec/ipmi.exp, lib/exec/ssh.exp: Set PATH.

	* lib/exec/ipmi.exp: Added.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ssh.exp: Tweaked pattern for prompt.

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ibm-hs20.exp, lib/exec/ssh.exp: Added state variable to
	  track when authentication step was complete.  Added pattern to eat
	  unmatched lines in order to reduce size of pattern match buffer.
	  Made username and password globs case-insensitive.
	* lib/exec/ibm-hs20.exp:
	  Fixed bug with $port instead of $blade being set to argv[1].

	* lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ibm-hs20.exp, lib/exec/ssh.exp: Tweaked documentation.

2007-03-06  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/exec/ssh.exp: Tweaked documentation.

	* lib/exec/ibm-hs20.exp: Added documentation for interact patterns.

	* lib/exec, lib/exec/cyclades-ssh.exp, lib/exec/cyclades-telnet.exp,
	  lib/exec/ibm-hs20.exp, lib/exec/ssh.exp: Added.

2007-02-27  Chris Dunlap  <cdunlap@llnl.gov>

	* server-esc.c (perform_serial_break): Added support to perform a
	  serial-break on process-based consoles by sending "&B" to the
	  console.  The script controlling the process can intercept this
	  sequence to perform an appropriate action.

2007-02-23  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c (open_objs): Tweaked log msg verbage.

2007-02-22  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c (exit_handler, sig_hup_handler, sig_chld_handler):
	  Removed log_msg() from signal handlers to protect against held lock
	  being interrupted resulting in a deadlock.
	* server.c (mux_io): Added log_msg()s from signal handlers.

	* log.c (log_aux):
	  Replaced thread-unsafe localtime() with thread-safe get_localtime().

	* server.c: Added support for process objs.
	* server.c (open_objs): Set RLIMIT_NOFILE to rlim_max.
	* server.h:
	  Added process_obj struct.  Updated obj_type enum & aux_obj union.
	  Added is_process_obj macro.  Updated is_console_obj macro.
	  Added gotTruncate to logfile_obj struct.
	  Added execDirName to server_conf struct.
	  Added PROCESS_MAX_COUNT & PROCESS_MIN_TIMEOUT defines.
	  Updated prototypes.
	* server-conf.c: Added ExecDir keyword to config file.
	* server-conf.c (parse_console_directive): Restructured.
	* server-conf.c (process_console): Added.
	* server-conf.c (is_empty_string): Moved to util-str.c.
	* server-esc.c (process_telnet_escapes, send_telnet_cmd,
	  process_telnet_cmd): Moved to server-telnet.c
	* server-logfile.c (parse_logfile_opts): Changed prototype.
	* server-logfile.c (open_logfile_obj): Added support for process obj.
	* server-logfile.c: Added create_logfile_obj().
	* server-obj.c (create_obj, destroy_obj):
	  Added support for process obj.
	* server-obj.c (create_logfile_obj): Moved to server-logfile.c.
	* server-obj.c (create_serial_obj, open_serial_obj):
	  Moved to server-serial.c.
	* server-obj.c (create_telnet_obj, connect_telnet_obj,
	  disconnect_telnet_obj, reset_telnet_delay): Moved to server-telnet.c.
	* server-obj.c (reopen_obj, write_notify_msg): Added.
	* server-obj.c (shutdown_obj): Added support to reopen console objs.
	* server-process.c: Added create_process_obj() & open_process_obj().
	* server-serial.c: Added create_serial_obj() & open_serial_obj().
	* server-sock.c (check_console_states):
	  Added checks for process and serial consoles.
	* server-telnet.c: Added create_telnet_obj(), open_telnet_obj(),
	  connect_telnet_obj(), disconnect_telnet_obj(), reset_telnet_delay(),
	  process_telnet_escapes(), send_telnet_cmd(), process_telnet_cmd().
	* etc/conman.conf, man/conman.conf.5.in: Added SERVER EXECDIR keyword.
	  Documented the use of external process-based connections for the
	  CONSOLE DEV keyword.
	* util-str.c, util-str.h: Changed set_string() to replace_string().
	  Changed prototype for create_time_delta_string().
	* Makefile.in: Added server-process.o & server-telnet.o.

2007-02-14  Chris Dunlap  <cdunlap@llnl.gov>

	* util-str.c (is_empty_string): Tweaked.

	* util-str.c, util-str.h:
	  Added set_string(), is_empty_string(), parse_string().
	  Changed substitute_string() to substitute "%c" sequences.

2007-01-03  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c (create_client_conf): Made getlogin() the preferred
	  method for ascertaining the client's username.

	* : Updated copyright date range.

2006-12-14  Chris Dunlap  <cdunlap@llnl.gov>

	* server-conf.c (parse_server_directive): Changed LogDir processing to
	  check and ensure directory exists.
	* server-conf.c (create_server_conf): Die if getcwd() fails.

	* server.h: Removed unused optState[] from struct telnet_obj.
	* server-obj.c (create_telnet_obj): Removed initialization of
	  aux.telnet.optState[].
	* server-esc.c: Updated rfc1143 Q-Method telnet option negotiation
	  fixme comment.

2006-12-13  Chris Dunlap  <cdunlap@llnl.gov>

	* server-esc.c (process_telnet_cmd): Removed outdated comments.

	* server.c (open_daemon_logfile): Added assert for !enableForeground.

	* server.c (main): Moved signal handlers after initial daemonization.

	* server.c (main): Fixed bug introduced by previous commit where
	  sighup handler was not re-established after daemonization.

	* server.c: Added calls to process_cmdline() and process_config().
	  Changed daemonization to be controlled by enableForeground flag.
	* server-conf.c (create_server_conf): Changed prototype.
	  Replaced implicit call to process_server_conf() with explicit calls
	  to process_cmdline() and process_config() in server.c:main().
	* server-conf.c (process_server_conf): Removed.
	* server-conf.c (process_cmdline): Replaced parse_server_cmd_line().
	  Added '-F' cmdline opt.
	* server-conf.c (process_config): Replaced parse_server_conf_file().
	  Added calls from process_server_conf() to signal_daemon(), obtain
	  lock on config file, and write pidfile.
	* server-conf.c (display_server_help): Documented '-F' cmdline opt.
	* log.c: Changed use of "daemonize" pipe to return both error priority
	  and message across fork() and back to shell.
	* server.h: Added enableForeground to struct server_conf.
	  Added prototypes for process_cmdline() and process_config().
	  Updated prototype for create_server_conf().
	* man/conman.conf.5.in: Updated entry for 'logfile' server directive
	  to note that messages are logged to the file only if the daemon is
	  not running in the foreground.
	* man/conmand.8.in: Documented '-F' cmdline opt.
	* NEWS: Updated.

2006-12-10  Chris Dunlap  <cdunlap@llnl.gov>

	* man/conman.1.in, man/conman.conf.5.in, man/conmand.8.in:
	  Changed .TH manual title.

2006-12-09  Chris Dunlap  <cdunlap@llnl.gov>

	* man/conman.1.in, man/conman.conf.5.in, man/conmand.8.in:
	  Minor formatting and grammar tweaks.

2006-09-27  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init.in: Updated to version from munge-0.5.4.

2006-07-25  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c, log.c, log.h: Replaced log_daemonize_fd global with
	  log_set_err_pipe().

2006-07-12  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated URL.  Updated copyright date range.  Updated FSF address.

	* DISCLAIMER: Updated.

	* COPYING, INSTALL: Updated.

	* auxdir/config.guess, auxdir/config.sub, auxdir/install-sh,
	  auxdir/mkinstalldirs: Updated.

2006-07-11  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c (main): Changed wording of "no consoles are defined" msg.

	* README: Added.
	* conman.spec: Added README.

	* server.c: Changed the "no consoles are defined" msg into an err msg.
	* server.c: Changed begin_daemonize() and end_daemonize() so
	  grandchild process can return status to the parent via the pipe.
	* log.c, log.h: Added log_daemonize_fd global.
	* server-conf.c (process_server_conf): Changed ordering of ops to
	  obtain fcntl lock on configuration file in order to remove potential
	  race condition.
	* server-conf.c (write_pidfile): Replaced pidfile asserts with runtime
	  conditional checks.

2006-06-26  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.9.2.

	* META, NEWS: Updated for 0.1.9.2 release.

2006-06-22  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c (disconnect_telnet_obj): Fixed bug where a timer was set
	  for connect_telnet_obj() taking one arg, but connect_telnet_obj()
	  required two args.
	* server-obj.c (resolve_retry): Removed.
	* server-obj.c: Removed tpoll_t parm from connect_telnet_obj(),
	  disconnect_telnet_obj(), and shutdown_obj().
	* server-sock.c: Removed tpoll_t parm from check_console_state().
	* server.c: Added tp_global var to allow timers to be set or canceled
	  without having to pass the conf's tp var through the call stack.
	* server.c: Removed tpoll_t parm from reset_console().
	* server.h: Reverted prototypes for connect_telnet_obj(),
	  disconnect_telnet_obj(), and shutdown_obj().

2006-06-07  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c (connect_telnet_obj): Changed variable type of the
	  fifth argument passed to getsockopt() from int to socklen_t.

2006-06-05  Chris Dunlap  <cdunlap@llnl.gov>

	* tpoll.c: Tweaked formatting.

	* tpoll.c (tpoll): Optimized tests in computation for poll() timeout.
	  Replaced do_break_on_timeout bool with tests at bottom of for-loop.

	* tpoll.c (_tpoll_signal_recv): Fixed 0-assertion.

	* tpoll.c (tpoll): Optimized test for read activity on fd_pipe.

	* tpoll.c (tpoll_timeout_absolute): Optimized var in timercmp().

	* server-conf.c (write_pidfile): Restructured.

	* server-conf.c (write_pidfile): Fixed double-free of file pointer.

	* tpoll.c (_tpoll_signal_recv): Removed unnecessary assertion.

	* tpoll.c (_tpoll_inc_nofile): Removed since RLIMIT_NOFILE must already
	  be increased before the file is opened which must occur before the fd
	  can be added to tpoll.

2006-06-04  Chris Dunlap  <cdunlap@llnl.gov>

	* tpoll.c (tpoll): Removed unused variables.

	* tpoll.c (tpoll): Restructured computation for poll() timeout.
	  Fixed bugs causing for-loop to prematurely exit when inner poll()
	  timed-out.
	* tpoll.c (_tpoll_diff_timeval): Changed calculation to round to the
	  next millisecond.  This prevents tpoll() from briefly spinning when
	  dispatching timers expiring in less than a millisecond.
	* tpoll.c: Changed bool values from 1/0 to true/false.

2006-05-25  Chris Dunlap  <cdunlap@llnl.gov>

	* NEWS: Changed format.

	* : Released 0.1.9.1.

	* META, NEWS: Updated for 0.1.9.1 release.

	* conman.spec: Added "%{_sysconfdir}/*/*" to files.

	* : Released 0.1.9.

	* FAQ: Updated.

	* META, NEWS: Updated for 0.1.9 release.

	* man/conman.1.in, man/conman.conf.5.in, man/conmand.8.in:
	  Updated copyright date range.

2006-05-24  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec: Added %doc's for FAQ & NEWS.

	* FAQ: Added.

	* NEWS: Added.

	* server.c (mux_io): Fixed bug introduced during conversion to tpoll()
	  where connect_telnet_obj() was not being called on POLLIN for a
	  telnet obj in the CONMAN_TELCON_PENDING state thereby causing loop
	  to spin.

2006-05-23  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c (open_objs): Modified to increase RLIMIT_NOFILE to at least
	  the hard limit.

	* server.c (mux_io): Added POLLHUP & POLLERR to force read_from_obj().

	* server-obj.c (resolve_retry): Fixed assertion.

	* server-obj.c (resolve_retry): Cleared aux.telnet.timer.

	* server-obj.c: Added resolve_retry().
	* server.h: Added RESOLVE_RETRY_TIMEOUT.

2006-05-22  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c: Moved hostname resolution from create_telnet_obj() to
	  connect_telnet_obj().  Removed check for dup server based on
	  hostname.
	* server.h: Removed saddr from struct telnet_obj.

	* server.c (open_objs): Increased RLIMIT_NOFILE.

2006-05-10  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init.in: Changed query_pids ps format specifier from
	  "args" to "command" for OS X.  Replaced query_pids ps format
	  specifier for empty column headers (=) with "| tail +2" for OS X.

2006-05-09  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init.in, etc/conman.sysconfig:
	  Renamed ENABLE_RELOAD to SIGHUP_RELOAD.
	* etc/conman.init.in: Renamed from etc/conman.init.
	  Added prefix, exec_prefix, sbindir, and sysconfdir.
	* Makefile.in: Added etc/conman.init to AC_OUTPUT.
	* configure.ac: Added etc/conman.init to AC_CONFIG_FILES.

	* etc/conman.init: Replaced use of "which" with query_exec (Tru64).

2006-05-05  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.sysconfig: Set svn:keywords & svn:eol-style props.

	* etc/conman.init, etc/conman.sysconfig: Tweaked defs.

2006-05-04  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init: Added support for NICE & USER.
	  Changed ENABLE_SIGHUP_RELOAD to ENABLE_RELOAD.
	  Replaced use of "source" keyword with "." (AIX).

	* Makefile.in: Added sysconfig to "install" target.
	* etc/conman.sysconfig: Added.

2006-05-02  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init: Removed use of "local" keyword (Solaris).

	* etc/conman.init: Added tests for distro release/version files in
	  service_init() to prevent SuSE from being recognized as Debian due to
	  existence of /sbin/start-stop-daemon.

	* etc/conman.init: Replaced "echo -n" with "printf" (AIX).

	* tpoll.c, tpoll.h: Tweaked copyleft boilerplate.

	* etc/conman.init: Revamped.

2006-04-22  Chris Dunlap  <cdunlap@llnl.gov>

	* tpoll.c: Changed _tpoll_signal_write() to _tpoll_signal_send().
	  Changed _tpoll_signal_read() to _tpoll_signal_recv().

2006-04-20  Chris Dunlap  <cdunlap@llnl.gov>

	* tpoll.c (tpoll_create): Removed fcntl() to set FD_CLOEXEC.

	* tpoll.c: Added is_blocked flag so tpoll can only be signaled while
	  potentially blocked on the internal poll().  Changed test so
	  additional poll() is not required on timeout.

	* common.h: Disabled DO_CONF_ESCAPE_ERROR.

	* tpoll.c: Documented locking protocol.

	* tpoll.c: Added implementation notes.

	* tpoll.c (_tpoll_signal_read): Prevented requiring two read()s to
	  drain a signal from fd_pipe.

	* tpoll.c: Added is_signaled flag to tpoll struct.

2006-04-19  Chris Dunlap  <cdunlap@llnl.gov>

	* server-conf.c (write_pidfile): Fixed resource leak of file handle.

	* server.h: Added tp to server_conf struct.  Updated prototypes for
	  connect_telnet_obj(), disconnect_telnet_obj(), shutdown_obj().
	* server.c: Updated timers using new tpoll API.  Moved mux_io() local
	  tpoll_t variable to server_conf struct.
	* server-conf.c: Added code to create/destroy conf's tpoll object.
	* server-obj.c: Updated timers using new tpoll API.  Added tpoll_t
	  parm to connect_telnet_obj(), disconnect_telnet_obj(),
	  shutdown_obj().
	* server-sock.c: Added tpoll_t parm to check_console_state().
	* tpoll.c, tpoll.h: Revamped.  Changed API.  Made thread-safe.  Added
	  signaling pipe to unblock poll().  Changed timers to be dependent
	  upon the tpoll object.  Removed cache of inactive timers.

2006-03-30  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac: Removed AC_PREFIX_DEFAULT and "--with-conman-conf".
	  Changed config file location to be based off of $sysconfdir.
	* conman.spec: Rewrote scripts: removed %pre, changed %post & %preun,
	  added %postun.  Rewrote %files: replaced /etc with ${_sysconfdir},
	  and ${_libdir} with %{_prefix}/lib per Fedora's "More RPM Building
	  Hints".
	* Makefile.in: Rewrote install target.

2006-03-29  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init: Revamped.

	* Makefile.in: Removed target for conman.spec.  Removed conman.spec
	  from $AC_OUTPUT to prevent it from being removed via distclean
	  target.

	* configure: Updated to autoconf-2.59.
	* configure.ac: Removed conman.spec from AC_OUTPUT.

	* Make-rpm.mk: Removed.
	* Makefile.in: Removed include of Make-rpm.mk.

	* conman.spec: Renamed from conman.spec.in.

2006-03-28  Chris Dunlap  <cdunlap@llnl.gov>

	* server-conf.c: Silenced coverity warnings for not checking
	  lex_next() return value when discarding an invalid config line.

	* common.c: Updated [conman_license] copyright date range.

	* server-conf.c (write_pidfile): Fixed resource leak when an error
	  occurred while creating the pid file.

	* log.c (log_set_syslog): Fixed bug where [ident] was potentially
	  dereferenced before NULL check.

	* AUTHORS: Added.

	* server.c (mux_io), server-obj.c (read_from_obj): Updated with tpoll.
	* server.h: Changed prototype for read_from_obj().
	* Makefile.in: Replaced tselect.o with tpoll.o.
	* tpoll.c: Added from tselect.c.
	* tpoll.h: Added from tselect.h.

2005-02-24  Chris Dunlap  <cdunlap@llnl.gov>

	* strlcpy.c, strlcat.c: Updated to latest version from
	  <ftp://ftp.openbsd.org/pub/OpenBSD/src/lib/libc/string/>.

2005-02-09  Chris Dunlap  <cdunlap@llnl.gov>

	* : Moved source repository from CVS to Subversion.

2003-12-03  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in, config.h.in, configure, configure.ac, conman.spec.in:
	  Updated to autoconf-2.57.  Enable tcp-wrappers by default if
	  possible.  Added CPPFLAGS AC-substitution to support non-standard
	  includes.

	* server-logfile.c (write_log_data):
	  Fixed compiler warnings under Tru64 v5.1 {gnats:343}.

2003-10-22  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/examples/shell_cmd_1.exp, lib/examples/shell_cmd_n.exp:
	  Tweaked to handle cmd starting with regex metachar {gnats:316}.

2003-10-21  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/examples/shell_cmd_1.exp, lib/examples/shell_cmd_n.exp:
	  Added {gnats:316}.

2003-10-07  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.8.8.

	* etc/conman.conf, man/conman.conf.5.in: Tweaked timestamp logopt docs.

2003-10-03  Chris Dunlap  <cdunlap@llnl.gov>

	* server-logfile.c, server-obj.c, server.h: Fixed newline timestamping
	  so that the timestamp is generated when the first character following
	  the line break is output (instead of when the line break occurs).

2003-10-01  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.8.7.

	* client-tty.c, common.h, server-conf.c, server-esc.c,
	  server-logfile.c, server-obj.c, server.h, etc/conman.conf,
	  man/conman.1.in, man/conman.conf.5.in: Changed console log newline
	  timestamping from '&T' client escape toggle to configuration file
	  'logopt' setting {gnats:296}.

2003-09-30  Chris Dunlap  <cdunlap@llnl.gov>

	* server-logfile.c: Only ignore NULs on newline transition
	  when sanitizing console logs.

2003-09-26  Chris Dunlap  <cdunlap@llnl.gov>

	* server-logfile.c: Ignore NULs when sanitizing console logs.

	* Make-rpm.mk: Changed "rpm -ba" to "rpmbuild -ba".

	* etc/conman.init: Fixed bug where INITLOG_ARGS setting was lost
	  once /etc/rc.d/init.d/functions was sourced.

	* client-tty.c, common.h, server-esc.c, server-logfile.c,
	  server-obj.c, server.h, util-str.c, util-str.h, man/conman.1.in:
	  Added '&T' escape to toggle newline timestamping of logs {gnats:284}.

2003-09-22  Chris Dunlap  <cdunlap@llnl.gov>

	* common.c, man/conman.1.in, man/conman.conf.5.in, man/conmand.8.in:
	  Updated copyright.

2003-07-24  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.8.6.

	* etc/conman.init:
	  Rewrote init script to be platform independent {gnats:72}.

	* server-conf.c, man/conman.conf.5.in, man/conmand.8.in:
	  Added '-q' cmdline option to daemon for pid query {gnats:72}.

	* Makefile.in: Added tests for platform-dependent locations of the
	  init script {gnats:72}.

	* server-conf.c, server-obj.c, server.c, server.h, etc/conman.conf,
	  man/conman.conf.5.in, man/conmand.8.in: Added fallback for
	  determining daemon's pid via use of the pid file.  Ensured pid
	  file's perms are set appropriately.  Separated config processing
	  from parsing {gnats:72}.

2003-07-13  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.8.5.

	* etc/conman.conf, man/conman.conf.5.in: Tweaked docs {gnats:208}.

2003-07-11  Chris Dunlap  <cdunlap@llnl.gov>

	* common.h, server-conf.c, server-logfile.c, server-obj.c, server.c,
	  server.h, etc/conman.conf, man/conman.conf.5.in, man/conmand.8.in:
	  Added support for conversion specifiers {gnats:208}.
	  The '&' specifier for the console name has been deprecated.

2003-04-03  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.8.4.

	* server-esc.c (process_telnet_cmd):
	  Lowered priority of invalid telnet cmd msgs to LOG_DEBUG.

	* server-obj.c (destroy_obj): For tcflush() of serial obj, ensured
	  fd is valid and changed fatal err to nonfatal msg {gnats:93}.

	* etc/conman.init: Fixed bug where active terminal server connections
	  were not closed when conmand's host was rebooted/halted {gnats:160}.

2002-10-01  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c, str.c, str.h:
	  Moved server-obj.c:find_trailing_int_str() to
	  str.c:str_find_trailing_int().  All callers changed.

2002-09-26  Chris Dunlap  <cdunlap@llnl.gov>

	* common.c, common.h, tty.c, tty.h: Twiddled function names & parm
	  lists of get_tty_mode/get_tty_raw/set_tty_mode.  Prefixed function
	  names w/ "tty_" and moved from "common" to "tty".  All callers
	  changed.

2002-09-18  Chris Dunlap  <cdunlap@llnl.gov>

	* server.h, server-conf.c, str.c, str.h:
	  Moved server-conf.c:is_empty_string() to str.c:str_is_empty().

	* str.c, str.h, util-str.c, util-str.h: Renamed "util-str" to "str".
	  Twiddled function names and prefixed w/ "str_".  All callers changed.
	  str_get_time_short(), str_get_time_long(), & str_get_time_delta()
	  return char * to static data -- not thread safe anymore.

2002-09-17  Chris Dunlap  <cdunlap@llnl.gov>

	* fd.c, fd.h, util-file.c, util-file.h: Renamed "util-file" to "fd".
	  Twiddled function names and prefixed w/ "fd_".  All callers changed.

	* Makefile.in (clean, distclean): Tweaked.

	* config.h.in, configure: Updated with autoconf-2.53.

	* : Tweaked #else/#endif comments according to gnu standards.

2002-09-16  Chris Dunlap  <cdunlap@llnl.gov>

	* ChangeLog : New (based on rcs2log output).

	* HISTORY: New.

2002-09-14  Chris Dunlap  <cdunlap@llnl.gov>

	* list.c: Tweaked comments.

	* list.c (list_alloc_aux, list_free_aux): Consolidated various
	  alloc/free routines.

2002-09-13  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.conf, man/conman.conf.5.in, server-conf.c:
	  Changed default loglevel from INFO to NOTICE.

2002-09-09  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c, client-sock.c, server-obj.c: Changed socket() domain
	  parm from AF_INET to PF_INET.

	* man/conman.1.in, man/conman.conf.5.in: Updated docs.

	* server.c: Changed ResetCmd log_msg priority.

2002-09-04  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.8.3.

	* common.h, etc/conman.init: Added kludge for >1024 fds {MCR}.

2002-08-21  Chris Dunlap  <cdunlap@llnl.gov>

	* etc/conman.init: Disabled suppression of stderr msgs.

2002-08-16  Chris Dunlap  <cdunlap@llnl.gov>

	* Make-rpm.mk: Fixed HEAD release date format to not exceed 32b ints.

2002-08-13  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.8.2.

	* client-tty.c, common.h, server-esc.c: Added client esc char for
	  sending raw DEL char via '&D' {gnats:100}.

2002-07-15  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.8.1.

	* server-esc.c: Added kludge to reject option requests beside ECHO and
	  SUPPRESS GO AHEAD.  Now functional with telnetd and icebox3
	  {gnats:89}.

2002-06-18  Chris Dunlap  <cdunlap@llnl.gov>

	* DISCLAIMER: Updated to reflect latest GPL statement from DARS.

2002-06-06  Chris Dunlap  <cdunlap@llnl.gov>

	* conmen: Added work-around for xterms ignoring SIGTERM {gnats:77}.

2002-05-20  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.8.

	* server-conf.c: Fixed solaris2.8 portability issues.  Replaced
	  prioritynames[] & facilitynames[] w/ internal portable equivalents.

	* etc/conman.conf, man/conman.conf.5.in, server-conf.c, server.h:
	  Added GLOBAL LOG config directive.

	* etc/conman.conf, man/conman.conf.5.in, server-conf.c, server.c,
	  server.h: Added "priority" to the SERVER LOGFILE config directive.

	* server-conf.c: Fixed bug where empty strings were not getting
	  detected during config parsing.

2002-05-19  Chris Dunlap  <cdunlap@llnl.gov>

	* server-conf.c: Fixed bug where pidfile write was attempted after
	  its open had failed.  Fixed bug where relative path to pidfile would
	  fail to unlink() after chdir().

	* server-logfile.c, server.c: Asserted logfiles are specified with
	  absolute pathnames.

	* client-conf.c: Tweaked test of fclose() return value.

	* server-conf.c, server.c, server.h: Fixed bug where logfiles used
	  relative paths and were unable to be reopened via sighup since the
	  daemon had chdir()'d to the root dir.

	* conmen: Tweaked PATH.

	* etc/conman.conf, man/conman.conf.5.in, man/conmand.8.in,
	  client-conf.c, client.c, log.c, log.h, server-conf.c, server-obj.c,
	  server.c, server.h: Added SERVER LOGFILE & SYSLOG config directives.

2002-05-18  Chris Dunlap  <cdunlap@llnl.gov>

	* Make-rpm.mk: Changed HEAD releases to have a release number of
	  the form "YYYYMMDDHHMM".  Fixed bug in redefinition of Source tag.

	* util-str.c: Tweaked format of timestamps.

	* server-esc.c: Tweaked order of TELCMDS & TELOPTS defs to ensure
	  config.h doesn't interfere.

	* client-conf.c, man/conman.1.in, man/conmand.8.in, server-conf.c:
	  Tweaked license info cmdline opt verbage.

	* common.c: Added URL to software license string.

	* client-conf.c, common.c, common.h, man/conman.1.in, man/conmand.8.in,
	  server-conf.c: Added '-L' cmdline opt for software license.

	* Make-rpm.mk: Changed cvs export to generate only keyword values
	  for keyword strings.

2002-05-16  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c, client-sock.c, client-tty.c, client.c, common.c,
	  common.h, server-esc.c, server-logfile.c, server-obj.c,
	  server-sock.c, server.c, server.h: Made enums CONMAN-qualified
	  {Tru64 v5.1 r732} {gnats:66}.

	* client.c: Added log_set_file() to send error messages to stderr.

	* common.h, server.h: Made enum type bit fields unsigned {gnats:66}.

	* man/conmand.8.in: Tweaked NOTES verbage.

	* server.c: Changed NDEBUG behavior so config warnings are sent to
	  both syslog & stderr.

	* server-conf.c, server.h, common.h: Removed trailing comma from enums
	  {Tru64 v5.1 r732}.

	* config.h.in, configure.ac: Protected _REENTRANT from multiple defs.

	* Makefile.in: Fixed ctags wildcard pattern {Tru64 v5.1 r732}.

2002-05-15  Chris Dunlap  <cdunlap@llnl.gov>

	* man/conmand.8.in: Added SIGNALS and NOTES sections.

	* log.c, server.c: Changed NDEBUG behavior so config errors are sent
	  to both syslog & stderr.

	* man/conmand.8.in: Added verbage to '-k' cmdline option wrt config
	  being modified while daemon is active.

2002-05-14  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c : Modified behavior to display help and exit if
	  no-query and no-consoles.

	* conman.spec.in: Tweaked summary info.

2002-05-13  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in: Tweaked 'realclean' target.

	* : Released 0.1.7.

2002-05-12  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated URL.

2002-05-11  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec.in: Tweaked build directive spacing.  Fixed build
	  directive that got confused with DEBUG hack.  Changed "./configure"
	  to "%configure" to properly set paths.

	* etc/conman.conf, man/conman.1.in, man/conman.conf.5.in,
	  man/conmand.8.in, Makefile.in, config.h.in, configure, configure.ac,
	  conman.spec.in: Added man pages {gnats:41}.

	* client-conf.c: Tweaked display_client_help() message.

2002-05-10  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c: Modified behavior to display help & exit if no
	  cmdline args are given.

2002-05-09  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c: Removed unnecessary FIXME comment.

	* conman.spec.in: Fixed bug where DEBUG def'd and RPM_ENABLE_DEBUG not.

	* server.c: Removed NDEBUG display of log msgs to both stderr & syslog.

	* server-obj.c: Added log msgs for serial console being
	  connected/disconnected.

	* Make-rpm.mk: Fixed gpg_name/pgp_name regex to work with RPM 4.0.4.

	* lex.c, server-obj.c, server-serial.c, server.c, util-net.c: Added
	  ifdefs to remove "defined but not used" compiler warnings.

	* server-sock.c: Tweaked log messages again.

2002-05-08  Chris Dunlap  <cdunlap@llnl.gov>

	* server-sock.c: Tweaked log messages.

	* client-conf.c, client-sock.c, common.h, configure, configure.ac,
	  server-conf.c, server-esc.c, server-logfile.c, server-obj.c,
	  server.c, util-net.c, util-net.h: Minor tweaks to appease Solaris
	  SUNWspro compiler {gnats:37}.

	* Makefile.in: Tweaked $(INSTALL) opts to set perms & strip binaries.

	* server-serial.c, server-sock.c, server.c, server.h, tselect.c,
	  util-file.c, util-net.c, util-str.c, util.c, wrapper.h, Makefile.in,
	  client-conf.c, client-sock.c, client-tty.c, client.c, common.c,
	  config.h.in, configure.ac, errors.c, errors.h, log.c, log.h,
	  server-conf.c, server-esc.c, server-logfile.c, server-obj.c:
	  Revamped logging subsystem; renamed "errors.[ch]" to "log.[ch]".
	  Removed variable-argument define macros {gnats:37}.  Cleaned up
	  config file error reporting output.

2002-04-29  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c: Tweaked "host:port" parsing from '-d' cmdline arg
	  and CONMAN_HOST env var.

2002-03-31  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac, conmen: Added GPL copyleft.

2002-03-30  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c, client.c, client.h: Added CONMAN_HOST, CONMAN_PORT,
	  and CONMAN_ESCAPE env vars.

2002-03-29  Chris Dunlap  <cdunlap@llnl.gov>

	* configure, configure.ac: Tweaked CFLAGS to prevent SUNWspro compiler
	  confusion {gnats:37}.

	* client-conf.c: Added verbage to cmdline help describing how to
	  close session {gnats:41}.

	* config.h.in, configure.ac: Added _REENTRANT def {gnats:42}.

	* : Tweaked GPL copyleft.

	* conman.spec.in: Added COPYING and DISCLAIMER.

2002-03-14  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added GPL copyleft and LLNL disclaimer.

	* Makefile.in: Specified perms to mkinstalldirs.  Changed "! test"
	  to "test !" for better portability.  Tweaked tags target.

2002-02-09  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec.in: Replaced PACKAGE a/c def with PROJECT a/c def.

2002-02-08  Chris Dunlap  <cdunlap@llnl.gov>

	* Make-rpm.mk: Added support for specifying "rev" w/ "tag=HEAD" builds.

	* : Minor formatting changes: lines <= 79 chars; removed tabs.

2002-02-04  Chris Dunlap  <cdunlap@llnl.gov>

	* config.h.in, configure.ac: Fixed builds with dmalloc under RH7+.

2002-01-28  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.6.

	* server-logfile.c, server-obj.c, server.h: Fixed bug that caused
	  some console log msgs to be double-spaced {gnats:1}.

2002-01-14  Chris Dunlap  <cdunlap@llnl.gov>

	* common.c, common.h, lex.c, lex.h, server-conf.c:
	  Changed lookup_token() linear search to binary search.

	* util-net.c: Updated includes.

2002-01-02  Chris Dunlap  <cdunlap@llnl.gov>

	* server-esc.c: Fixed bug in perform_log_replay() that prevented
	  info msg from being sent to client when console was not being logged.

	* : Released 0.1.5.

	* server-obj.c: Tweaked twiddling of gotEOF flag in unlink_obj()
	  and unlink_objs().

	* Makefile.in: Tweaked ctags opts to be more portable.

	* client-conf.c, server.c: Fixed compiler warnings.

2001-12-31  Chris Dunlap  <cdunlap@llnl.gov>

	* server-esc.c, server-obj.c: Allow R/O clients to be notified when
	  console writers join/depart.

	* server-sock.c: Tweaked err msgs returned to client.

2001-12-30  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c, client-sock.c, client-tty.c, common.h, server-esc.c,
	  server-obj.c, server-sock.c, server.h: Added support for &F/&J/&M
	  client escape sequences.  Added obj link validation during debug.
	  Tweaked err/log msgs.

	* server-conf.c, client-conf.c, conmen: Updated help messages.

	* client-conf.c: Revamped read_consoles_from_file().

	* util-file.h: Added include for pid_t.

	* server.c: Fixed portability problem with passing pid via casting
	  to kill_console_reset().

	* Makefile.in: Added support for ctags.

2001-12-29  Chris Dunlap  <cdunlap@llnl.gov>

	* server-esc.c: Fixed bug in send_telnet_cmd() due to a failed
	  assertion when the telnet connection had not yet been established.

	* server-conf.c, server.c: Tweaked processing of SERVER TCPWRAPPERS
	  config keyword when WITH_TCP_WRAPPERS not def'd.

2001-12-28  Chris Dunlap  <cdunlap@llnl.gov>

	* common.h: Updated docs.

	* config.h.in, configure, configure.ac: Added default conf/host/port
	  to configure "--help" msg.

	* Makefile.in, client-conf.c, common.h, config.h.in, configure,
	  configure.ac, server-conf.c: Allow default conf/host/port to be set
	  via configure script.

2001-12-27  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c: Tweaked loop in unlink_obj() to reduce nesting level.

	* util-net.c: Renamed verify_hostent() to validate_hostent_copy().

	* server-logfile.c: Set tmp opts to defaults in parse_logfile_opts().

	* etc/conman.conf, Makefile.in, server-conf.c, server-logfile.c,
	  server-obj.c, server-serial.c, server-tty.c, server.h:
	  Added sanitized logs.  Added global/local LOGOPTS & SEROPTS.
	  Added GLOBAL config directive, LOGOPTS & SEROPTS config keywords.
	  Removed OPTS config keyword. Renamed server-tty.c to server-serial.c.
	  Added server-logfile.c (moving log functions from server-obj.c).

	* util-str.c, util-str.h: Added strcasecmp().

	* configure.ac, config.h.in, configure: Added test for strcasecmp().

	* server-obj.c: Tweaked syntax of assert()s.

2001-12-26  Chris Dunlap  <cdunlap@llnl.gov>

	* common.c: Updated docs.

2001-12-22  Chris Dunlap  <cdunlap@llnl.gov>

	* server-conf.c: Changed err msgs & exit codes in signal_daemon().

2001-12-21  Chris Dunlap  <cdunlap@llnl.gov>

	* server-esc.c: Fixed bug in perform_log_replay() that incorrectly
	  computed replay buf length.

2001-12-20  Chris Dunlap  <cdunlap@llnl.gov>

	* server-conf.c, server-sock.c, server.c, server.h:
	  Renamed config's enableWrappers to enableTCPWrap.

	* etc/conman.conf: Tweaked SERVER TCPWRAPPERS config directive.

	* configure, configure.ac: Changed CFLAGS '-ggdb' to '-g'.

	* util-net.c: Fixed copy_hostent() word-alignment problems.

	* config.h.in, configure, configure.ac: Removed HOST_ALIAS.

	* server-esc.c: Added info-msg for client when quiet-mode is toggled.

	* server-obj.c: Fixed Tru64 bug where the close() of a socket that
	  failed to connect() would return with an error of "invalid argument".

	* util-str.c: Fixed Tru64 bug with create_format_string --
	  vsnprintf()'s with len=0 wrote to unalloc'd dst buf causing
	  segfaults.

2001-12-19  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c: Fixed assertion bug in disconnect_telnet_obj().

	* client-sock.c, client.c, client.h: Changed behavior of err msg if
	  client failed to connect to server.

	* client-sock.c, common.h, etc/conman.conf, server-conf.c,
	  server-sock.c, server.c, server.h: Added SERVER TCPWRAPPERS config
	  directive.

2001-12-18  Chris Dunlap  <cdunlap@llnl.gov>

	* server-esc.c, server-obj.c, server.c, server.h: Updated docs.
	  Added get_console_logfile_obj().  Renamed notify_objs() to
	  notify_console_objs().  Revamped link_objs() and unlink_obj(),
	  thereby replacing unlink_objs() and unlink_objs_helper().  Changed
	  console logging to record when "writers" join/depart.  Changed client
	  notification so it warns of the console's existing writers that are
	  being joined with or stolen from.

2001-12-17  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in: Added pthread to COMMON_LIBS to appease Tru64 even
	  though client does not need it.

2001-12-16  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c, common.h, config.h.in, configure, configure.ac,
	  conman.spec.in, server-conf.c, server-sock.c: Added compile-time
	  support for TCP Wrappers.

2001-12-15  Chris Dunlap  <cdunlap@llnl.gov>

	* configure, configure.ac, lex.c, lex.h, list.c, list.h, tselect.c,
	  tselect.h, util.c, wrapper.h, config.h.in: Changed USE_* defs to
	  WITH_* defs.

2001-12-14  Chris Dunlap  <cdunlap@llnl.gov>

	* tselect.c: Added cast for time() return value.

	* common.h, config.h.in, configure, configure.ac:
	  Added check for socklen_t typedef.

	* server-obj.c, server-sock.c, server-tty.c, server.c, tselect.c,
	  util-net.c, util-str.c, client-sock.c, client-tty.c, common.c,
	  lex.c, list.c, server-conf.c: Fixed "cast to pointer from integer
	  of different size" assert() warnings.

	* server.h: Fixed NTELOPTS def for Solaris/Tru64.

2001-12-13  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c: Cast pid_t to int.

	* config.h.in, configure.ac: Cast return value from out_of_memory()
	  to (void *).

2001-12-12  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec.in: Fixed typo.

	* Makefile.in, conman.spec.in, etc/conman.init, etc/conman.logrotate:
	  Added logrotate configuration.

	* Makefile.in, client-conf.c, config.h.in, configure, configure.ac,
	  server-conf.c: Replaced PACKAGE def with PROJECT def.

	* Make-rpm.mk: Completely revamped yet again.  Changed PACKAGE macro
	  def to PROJECT.  Removed need for VERSION and RELEASE macro defs.

	* Makefile.in: Made PACKAGE macro def static.  Removed VERSION and
	  RELEASE macro defs.  Replaced VERSION with META file dependency.

2001-12-10  Chris Dunlap  <cdunlap@llnl.gov>

	* Make-rpm.mk, META, VERSION: Completely revamped.  Reduced to single
	  CVS access.  Replaced VERSION with META.

2001-12-05  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in: Fixed bug in rpm build install target caused by
	  PACKAGE macro def command substitution.  Tweaked macros defs for
	  PACKAGE/VERSION/RELEASE.

	* Make-rpm.mk: Replaced $(PACKAGE) with $$pkg and $(VERSION) with $$ver
	  in order to handle cmd-substitutions within the make macro defs.
	  Added support for $(RELEASE) macro def.  Removed stdout/stderr
	  redirection to /dev/null on final rpm cmd.  Added test to validate
	  package name based on contents of VERSION.  Tweaked "rpm -ba" cmd
	  so output is only displayed on error.  Removed occurrence of "cvs
	  checkout cannot find module `foo/foo.spec.in'" msg.  Tweaked cp of
	  rpms to copy subpackage rpms as well.  Updated docs.

2001-12-04  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec.in: Added support for RPM_ENABLE_DEBUG env var.

	* server-conf.c, server.c, server.h: Changed algorithm used by
	  schedule_timestamp().

	* wrapper.h: Added defs to no-op x_pthread_* macros if !USE_PTHREADS.

	* Make-rpm.mk: Tweaked regex for Name/Version/Release tags.

	* client-sock.c, client-tty.c, client.c, server-sock.c:
	  Tweaked err/info msg strings.

	* Make-rpm.mk, conman.spec.in: Removed name/version/release defs.

2001-10-14  Chris Dunlap  <cdunlap@llnl.gov>

	* lex.c, list.c: Changed magic from 0xCD to 0xDEADBEEF.  Removed magic
	  from structs when NDEBUG def'd.

2001-10-11  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in: Tweaked 'clean' target pattern for core droppings.

	* server-conf.c, server-esc.c, server-obj.c, server-sock.c, server.c,
	  server.h: Added support for reopening logfiles on SIGHUP.

	* tselect.c: Changed behavior so EINTR is no longer masked for
	  internal select().

2001-10-08  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.4.

	* etc/conman.conf, client-sock.c, client-tty.c, common.c, common.h,
	  server-conf.c, server-esc.c, server-obj.c, server-sock.c, server.c,
	  server.h, util-file.c, util-file.h, util-str.c, util-str.h:
	  Added support for SERVER RESETCMD config keyword.

	* client-conf.c: Replaced malloc err msg with out_of_memory().

2001-10-07  Chris Dunlap  <cdunlap@llnl.gov>

	* Make-rpm.mk, Makefile.in: Moved rpm/tar targets to Makefile include.

	* Makefile.in: Appended "+" to rpm/tar target ver string for HEAD tag.

2001-10-06  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in: Added ".\#*" pattern for cvs update conflict droppings
	  to 'clean' target.

	* Makefile.in: Removed restriction for rpm/tar targets using
	  $(mkinstalldirs).  Removed use of $(top_srcdir) from rpm/tar targets.

	* Makefile.in: Read CVSROOT from working dir for rpm/tar targets.

2001-09-27  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c: Tweaked display_configuration().

	* etc/conman.conf, server-conf.c, server.c, server.h:
	  Added SERVER TIMESTAMP config keyword.

2001-09-26  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.3.

	* server-obj.c: Commented out bug in timeout of TELNET obj connect().

	* conman.spec.in: Tweaked summary.

2001-09-25  Chris Dunlap  <cdunlap@llnl.gov>

	* wrapper.h: Added USE_PTHREADS ifdef.

	* tselect.c, tselect.h: Added abtimeout().

	* Makefile.in, server-esc.c, server-obj.c, server-sock.c, server.c,
	  server.h: Added TELNET reconnect.

	* tselect.c, tselect.h: Added temporary kludge to fix mux_io() pthread
	  brain-damage.  Fixed bug removing dispatched timer from active list.

2001-09-24  Chris Dunlap  <cdunlap@llnl.gov>

	* list.c: Added list*alloc() and list*free() routines.

	* lex.c: Set & clear struct magic via assert() abuse.

2001-09-23  Chris Dunlap  <cdunlap@llnl.gov>

	* tselect.c, tselect.h: New.

	* client-conf.c, client-sock.c, common.c, common.h, server-conf.c,
	  server-esc.c, server-obj.c, server-sock.c, server.c, util-str.c:
	  Replaced explicit memory allocation failure checks with implicit
	  checks.  Removed use of CONMAN_ERR_NO_RESOURCES.

	* lex.c, lex.h: Added support for out_of_memory() and USE_OOMF.

2001-09-22  Chris Dunlap  <cdunlap@llnl.gov>

	* config.h.in, configure.ac, list.c, list.h, util.c: Added support
	  for out_of_memory() and USE_OOMF.

	* errors.c: Added abort() to err_msg.  Added log_msg & err_msg
	  #undefs to protect function definitions.

2001-09-21  Chris Dunlap  <cdunlap@llnl.gov>

	* list.c: Tweaked includes.  Renamed LIST_*() defs to list_mutex_*().

	* config.h.in, configure, configure.ac, list.c: Changed
	  USE_THREAD_SAFE_LIST def to USE_PTHREADS.

	* server.h, server-obj.c, server.c: Added connect_telnet_obj()
	  and disconnect_telnet_obj().

	* util-str.c: Changed create_short_time_string() format to MM/DD HH:MM.

2001-09-20  Chris Dunlap  <cdunlap@llnl.gov>

	* server-conf.c: Fixed bug in log_msg() parm that passed
	  '&'-unsubstituted logfile name.

	* util-net.c: Fixed bug where mutex lock/unlock calls were inverted.

	* util-net.h: Tweaked documentation for host_addr4_to_name().

	* util-net.c, util-net.h: Renamed parms in host_addr4_to_name()
	  and host_name_to_cname().

	* Makefile.in: Added cscope droppings pattern to 'clean' target.

2001-09-18  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c: Added name of configuration to display_configuration().

2001-09-17  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.2.

	* etc/conman.conf, common.h, server-conf.c: Added server config
	  console log name '&' replacement.

	* server.c: Fixed bug in failed telnet connection log_msg() call
	  with incorrect errno parm.

	* INSTALL, config.h.in, configure.ac, configure.in: Renamed
	  configure.in to configure.ac (new convention as of autoconf-2.52).

	* server.h, server-esc.c, server-obj.c, server.c: Added telnet escape
	  sequence decoding.  Repartitioned state machine for decoding telnet
	  escape sequences.  Issue telnet SGA & ECHO opts once connection is
	  established.

2001-09-16  Chris Dunlap  <cdunlap@llnl.gov>

	* server-esc.c, server-obj.c, server-sock.c, server.c, server.h,
	  util-net.c, util-str.c, util.h, wrapper.h: Added wrapper defs for
	  pthread functions.

	* server-esc.c, server-obj.c, server.h: Renamed process_escape_chars()
	  to process_client_escapes(). Added stub for process_telnet_escapes().

2001-09-13  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c: Tweaked includes.

	* server-esc.c, server-obj.c, server-sock.c, util-net.c, util-str.c,
	  util-str.h, util.h: Added mutex defs.

	* util-str.c, util-str.h: Changed get_localtime() arg var names.

	* etc/conman.conf, server-conf.c, server-obj.c, server.c, server.h:
	  Added TELNET obj connection establishment.

	* client-sock.c: Renamed 'addr' to 'saddr' to reflect struct
	  sockaddr_in type instead of struct in_addr type.

2001-09-11  Chris Dunlap  <cdunlap@llnl.gov>

	* util-net.h: Tweaked comment reference.

2001-09-10  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in: Removed rpm target 'rpm -ba' output {Mandrake-8.1b3}.

2001-09-07  Chris Dunlap  <cdunlap@llnl.gov>

	* server-sock.c, server-tty.c, server.c, server.h, server-conf.c,
	  server-esc.c, server-obj.c: Split CONSOLE into SERIAL/TELNET objs.

	* util-net.c: Use shared mutex between get_host_by_(name|addr)()s.

2001-09-06  Chris Dunlap  <cdunlap@llnl.gov>

	* util-net.c: Fixed bug in host_strerror().  Tweaked get_host_by_name()
	  and get_host_by_addr() to always update h_err.

	* server-conf.c, server-obj.c, server.c, util-net.c: Minor tweaks
	  to appease Solaris compile.

	* common.h: Tweaked comments.

	* client-tty.c, server.c, util.c, util.h: Renamed Signal() to
	  posix_signal().

	* client-sock.c, server-sock.c: Revisited hostname resolution code.

	* client-conf.c, client-sock.c, client-tty.c, common.c, server-conf.c,
	  server-obj.c, server-sock.c, server.c: Tweaked includes.

	* Makefile.in, util-file.c, util-file.h, util-net.c, util-net.h,
	  util-str.c, util-str.h, util.c, util.h: Repartitioned util.c/util.h
	  into util-file, util-net, and util-str.

	* util.c, util.h: Added substitute_string().  Added get_host_by_name(),
	  get_host_by_addr(), host_strerror().  Added host_name_to_addr4(),
	  host_addr4_to_name(), host_name_to_cname().  Added copy_hostent(),
	  verify_hostent().  Removed get_hostname_by_addr().

2001-09-01  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c: Changed compare_objs() to sort trailing integers
	  numerically.

	* lib/examples/boot_alpha.exp: Changed proc post_boot_alpha to
	  proc boot_alpha.  Tweaked parallelism.

	* lib/conman.exp: Updated docs for possible states returned by proc
	  conman_check_console_state.

2001-08-31  Chris Dunlap  <cdunlap@llnl.gov>

	* errors.h: Tweaked DPRINTF and LDPRINTF defs to fit within 80 cols.

	* lib/examples/boot_alpha.exp: Added proc post_boot_alpha.
	  Execute post_boot_alpha with parallelism of 2.  Added bps rate to
	  boot_osflags setting.

	* lib/conman.exp: Fixed bugs in proc conman_check_console_state's
	  SROM & SHELL state patterns.

2001-08-30  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec.in: Tweaked post installation script to handle status
	  msg "conmand dead but subsys locked".

	* conman.spec.in: Tweaked pre/post/preun scripts to check result of
	  "/etc/rc.d/init.d/conman status" before starting/stopping daemon.

	* conman.spec.in: Added /usr/lib/conman, /usr/lib/conman/examples dirs.

2001-08-28  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.spec.in: Added pre/post/preun-installation scripts.

	* server-tty.c: Added <stdio.h> include.

	* conman.spec.in: Added /etc/rc.d/init.d/conman & boot_alpha.exp.

	* : Released 0.1.1.

	* etc/conman.conf: Added CONSOLE OPTS config keyword.

	* Makefile.in, server-tty.c, server.h: Added set_serial_opts().

	* server-obj.c: Added call to set_serial_opts().

	* client-tty.c, common.c, common.h, server-obj.c: Tweaked parm list
	  for get_tty_mode, set_tty_mode, get_tty_raw.

2001-08-27  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c: Added '-F' cmdline opt to read console names/patterns
	  from file.

2001-08-24  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in: Added $(top_srcdir) to final dest of 'rpm-internal'
	  and 'tar-internal' targets.  Added check for rpm spec file in
	  'rpm-internal' target.  Tweaked err msgs.  Renamed internal targets.

	* lib/conman.exp: Fixed bug that failed to reap zombies in conman_run.
	  Added SROM state pattern to conman_check_console_state.

2001-08-23  Chris Dunlap  <cdunlap@llnl.gov>

	* Makefile.in: Revamped 'rpm' & 'tar' targets to build entirely from
	  CVS repository.  Removed 'devtar' target.  Changed 'tar' target to
	  read version from CVS based on tag def.

	* lib/examples/boot_alpha.exp: Changed boot_alpha to pre_boot_alpha.
	  Execute pre_boot_alpha in parallel; then execute srm boot cmd
	  serially.  Adjusted delays.

	* lib/conman.exp: Swapped 1st & 2nd parms to conman_query and
	  conman_open; made 2nd parm optional.

2001-08-22  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/examples/boot_alpha.exp: Added 'echo' parm to boot_alpha.
	  Changed exec powerman cmd.  Changed parallelism from 1 to 4.
	  Added call to powerman to reset node.

	* lib/alpha.exp: Fixed alpha_do_srm_cmd pattern for boot via BOOTP.

	* Makefile.in: Added _tmppath define to 'rpm' target.  Added 'devtar'
	  target.  Allow cvs tag to be specified to 'tar' target via 'tag'
	  cmdline macro.  Added etc/conman.init to install target.

	* etc/conman.init: New.

	* etc/conman.conf, conman.conf: Moved conman.conf to etc/conman.conf.

2001-08-21  Chris Dunlap  <cdunlap@llnl.gov>

	* lib/examples/boot_alpha.exp: New.

	* lib/alpha.exp: Added timeout to alpha_do_rmd_cmd.  Added timeout to
	  alpha_do_srm_cmd parms.  Fixed bug in alpha_do_srm_cmd for matching
	  "jumping to bootstrap code".

	* Makefile.in: Tweaked gzip cmdline opts.  Added 'realclean' target.
	  Added support for signing RPMs.  Fixed bug in 'rpm' target that
	  would attempt rpm if tar had failed.  Added mkinstalldirs support.
	  Added 'tar' and 'rpm' targets.

	* auxdir/config.guess, auxdir/config.sub: Updated to autoconf-2.52.

	* auxdir/mkinstalldirs: New (from autoconf-2.52).

2001-08-17  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.0.

	* client-tty.c, common.c, common.h, server-obj.c: Fixed bug that
	  introduced ~1sec delay per device when setting raw tty mode.

	* Makefile.in: Added execute perms to installed lib files.

	* : Released 0.0.9.

	* Makefile.in, configure, configure.in, conman.spec.in:
	  Added RPM spec file.

	* lib/examples/mac.exp, lib/examples/rmc.exp, lib/examples/srm.exp,
	  lib/examples/wtf.exp, lib/alpha.exp: New.

	* lib/conman.exp, conman.exp: Moved conman.exp to lib/conman.exp.

	* conman.exp: Added conman_check_console_state.  s/send/exp_send/.

	* conmen: Added '-Q' cmdline opt to b/c window to suppress info msgs.

	* conman.conf: Added SERVER config directive with KEEPALIVE, LOGDIR,
	  LOOPBACK, PIDFILE, PORT keywords.

	* server.h, client-tty.c, client.h, common.c, common.h, server-obj.c:
	  Unified code for changing tty modes.

	* server-conf.c, server.h: Added SERVER LOGDIR config directive.

	* server-obj.c, server-sock.c, server.h: Changed create_*obj() parms.

	* client-tty.c, server-obj.c: Revisited terminal mode settings.

	* client-conf.c, common.h, server-conf.c: Tweaked DEFAULT_CONMAN_PORT.

2001-08-15  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c: Added support for comma-separated list of consoles.

	* server-conf.c, server.c, server.h:
	  Added SERVER PIDFILE config directive.

	* server.c: Renamed background_process() to begin_daemonize().
	  Renamed silence_process() to end_daemonize().  Changed
	  begin_daemonize() & end_daemonize() routines so parent will wait
	  for EOF signal from grandchild process before terminating.

	* server-obj.c: Fixed resource leak when unable to obtain write-lock
	  during obj creation.  Check for dup console dev names.  Obtain
	  write-lock for logfiles.  Tweaked log msgs.

	* server-conf.c: Added config file line numbers to warnings when
	  creating console/logfile objs.

2001-08-14  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c: Added checks to prevent dup console & logfile names.

	* util.c, util.h: Added file-locking routines.  Modified inet_pton()
	  to test for HAVE_INET_ATON.

	* server.h: Added server_conf_t:fd to support read-locking conf file.

	* server-esc.c, server-obj.c, server.c, server.h:
	  Moved obj_t:gotSuspended to client_obj_t:gotSuspend.

	* server.c: Added display_configuration().  Separated daemonize()
	  into background_process() and silence_process().  Redefined error
	  messages to be more user-friendly.

	* server-obj.c: Added write-locking of serial devices.

	* server-conf.c: Added '-k' cmdline option to kill daemon.  Added
	  '-p' cmdline option to specify alternate port.  Added SERVER config
	  directive and KEEPALIVE/LOOPBACK/PORT keywords.  Added read-locking
	  of config file.  Fixed bug where logfile obj would be created if
	  console obj creation failed.

	* lex.c: Added casts to parms of "iswhatever(int)" functions.

	* configure.in, config.h.in, configure: Updated to autoconf-2.52.
	  Fixed --enable-debug opt to allow CFLAGS/LDFLAGS to be overridden
	  by env.  Added tests for HAVE_INET_ATON, HAVE_LIBNSL, HAVE_LIBSOCKET,
	  WITH_DMALLOC.

	* common.h: Added FEATURES def for version info.

	* client.h, common.h, server.h: Changed booleans to bit-fields.

	* client-conf.c, client-sock.c, client-tty.c, client.c, common.c,
	  errors.c, errors.h, list.c, server-sock.c: Minor tweaks.

	* Makefile.in: Tweaked COMMON_LIBS/SERVER_LIBS defs.

2001-08-07  Chris Dunlap  <cdunlap@llnl.gov>

	* client-sock.c, client-tty.c, server-sock.c: Replaced snprintf()
	  ptr madness with append_format_string().

	* server.c: Disabled creation of core files in daemonize() unless
	  DEBUG is def'd.

	* util.c: Added assertions to append_format_string().

2001-08-06  Chris Dunlap  <cdunlap@llnl.gov>

	* server.c: Fixed bug that prevented QUIET client obj from being
	  destroyed when console was stolen by another client.

	* common.c, common.h: Removed PROGRAM keyword and error enums reserved
	  for EXECUTE option.

	* client-tty.c: Revamped perform_help_esc() to generate dynamic
	  message.  Fixed bug that allowed quiet & serial-break esc seqs to
	  be sent in MONITOR mode.

	* util.c, util.h: Added append_format_string().

	* client-conf.c, client-sock.c, client-tty.c, server-obj.c, util.c,
	  util.h: Renamed create_fmt_string() to create_format_string().

2001-08-03  Chris Dunlap  <cdunlap@llnl.gov>

	* strlcat.c, strlcpy.c: Updated to latest version from
	  <ftp://ftp.openbsd.org/pub/OpenBSD/src/lib/libc/string/>.

	* client-conf.c, client-sock.c, client-tty.c, common.c, common.h,
	  server-esc.c, server-obj.c, server-sock.c, server.h: Added "quiet"
	  cmdline and escape option to suppress informational messages.

2001-08-02  Chris Dunlap  <cdunlap@llnl.gov>

	* client-tty.c, common.h: Added "&I" escape sequence.

	* server-sock.c: Tweaked format of "console(s) already in use" msg.

	* client-conf.c: Removed EXECUTE option from display_client_help().

2001-08-01  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c, server.h, server-conf.c: Added '-z' server cmdline opt.

2001-07-31  Chris Dunlap  <cdunlap@llnl.gov>

	* server-sock.c, util.c, util.h, client-conf.c, client-tty.c,
	  common.c, common.h, server-esc.c, server-obj.c: Enclosed console
	  name in msgs within square brackets.  Truncated host name in msgs
	  from FQDN.  Removed whitespace from create_time_delta_string().
	  Renamed create_date_time_string() to create_long_time_string().
	  Renamed create_time_string() to create_short_time_string().
	  Added timezone to create_long_time_string().

	* client-conf.c, client-sock.c, client.c, common.c, common.h,
	  server-sock.c: Removed EXECUTE option (superseded by conman.exp).

2001-07-11  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.exp: Replaced lreplace w/ lrange for cdr op.

	* conman.exp: New.

2001-07-06  Chris Dunlap  <cdunlap@llnl.gov>

	* client-tty.c: Fixed bug causing expect scripts to dump core during
	  restore_tty_mode() when asserting isatty(fd).

	* client-conf.c, server-conf.c: Changed err msg returned when given
	  invalid or unimplemented option.

2001-06-21  Chris Dunlap  <cdunlap@llnl.gov>

	* conmen: Set PATH env var.

2001-06-19  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c, server.c, server.h: Fixed bug associated with keepalive
	  session time-outs -- read_from_obj() did not notify mux_io() that obj
	  was ready for destruction.

2001-06-18  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c: Changed server to log read/write errors instead of die.

	* client-conf.c, client-sock.c, common.c, common.h, conmen,
	  server-sock.c: Changed default console matching behavior to use
	  shell-style globbing.  Added '-r' option to perform console matching
	  using regular expressions.

	* server.c: Enabled keepalive on incoming socket connections.

	* conmen: Formatting tweaks.

2001-06-15  Chris Dunlap  <cdunlap@llnl.gov>

	* conmen: Fixed err msg ref to 'r' instead of 'm'.

	* : Released 0.0.8.

	* server-obj.c: Fixed "broken pipe on read" bug caused by mass conmen
	  exodus during writes.

	* conmen: Added pause between each of the spawned xterms.

	* server-esc.c: Squeezed a couple more bytes out of the replay buffer.

	* client.c, client-tty.c: Re-fixed bug caused by stdin/stdout not
	  being connected to a terminal -- they only need to be a terminal
	  device for connecting to a console.

	* conmen: Added '-g' option to specify xterm geometry.

	* client-tty.c: Fixed bug caused by suspending client, terminating
	  server, resuming client.

	* client-conf.c, client-sock.c, client-tty.c, client.c: Fixed bug
	  caused by undefined tty name.  Fixed bug caused by stdin/stdout not
	  being connected to a terminal.

	* client-conf.c, conmen: Changed monitor option from '-r' to '-m'.

	* server-sock.c, server.h, util.c, util.h, client-conf.c,
	  client-sock.c, client-tty.c, common.c, common.h, server-conf.c,
	  server-esc.c, server-obj.c: Housekeeping.

2001-06-14  Chris Dunlap  <cdunlap@llnl.gov>

	* errors.h: Fixed bug in DPRINTF and LDPRINTF macros.  Modified
	  err_msg() via macro madness to display FILE:LINE info during debug.

	* conmen: New.

2001-06-13  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c: Added getlogin() to help determine user login name.

2001-06-12  Chris Dunlap  <cdunlap@llnl.gov>

	* client-tty.c, server-esc.c, server-obj.c, server.c, server.h:
	  Modified client suspend/resume to also suspend/resume output at
	  server.

	* client.c, client.h, common.c, common.h, server-conf.c, server-obj.c,
	  server-sock.c, server.c, server.h, util.c, util.h, Makefile.in,
	  client-conf.c, client-sock.c, client-tty.c: Housekeeping.

	* server-esc.c: Moved esc-seq routines from server-obj.c.

2001-06-08  Chris Dunlap  <cdunlap@llnl.gov>

	* server-obj.c: Fixed bug in perform_log_replay() assertion.

	* : Released 0.0.7.

	* client-tty.c: Twiddled help string in perform_help_esc().

	* common.c, common.h: Reordered token enums & strings.

	* client-tty.c, common.h, server-conf.c, server-obj.c, server-sock.c,
	  server.h: Added log-replay esc-seq.

2001-06-07  Chris Dunlap  <cdunlap@llnl.gov>

	* client-tty.c: Changed behavior so esc char seqs are always
	  recognized instead of only being recognized immediately after
	  newline.

	* : Released 0.0.6.

	* common.h, server-obj.c, server-sock.c, server.c, server.h,
	  client-tty.c: Changed SOCKET obj refs to CLIENT obj refs.
	  Added client-side char-stuffing & server-side char-unstuffing.
	  Added serial-break esc-seq.

2001-05-31  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.0.5.

	* server-obj.c, server-sock.c, server.h: Added support for "join" opt.
	  Added support for multiple writers.

	* client-conf.c, client-sock.c, common.c, common.h, server-obj.c,
	  server-sock.c, server.h: Added name of client's tty dev to req
	  struct.

	* client-conf.c, client-tty.c, server-obj.c, server-sock.c, server.h:
	  Tweaked formatting of messages.

	* util.c, util.h: Separated create_time_string() into
	  create_date_time_string(), create_time_string(), and get_time().

	* Makefile.in: Added COMMON_LIBS and CLIENT_LIBS defs.

2001-05-29  Chris Dunlap  <cdunlap@llnl.gov>

	* conman.h, errors.c, server-conf.c, server-obj.c, server-sock.c,
	  server.c, server.h, client-conf.c, client-sock.c, client-tty.c,
	  client.c, client.h, common.c, common.h, configure, configure.in:
	  Renamed conman.h to common.h.  Created common req_t struct for
	  both client & server.  Placed client's req in server's socket obj.
	  Started "join" option.

2001-05-25  Chris Dunlap  <cdunlap@llnl.gov>

	* server-sock.c: Updated comments.

	* server-obj.c, server.h: Changed link_objs() and unlink_obj()
	  to return void.

2001-05-24  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.0.4.

	* server-obj.c, server-sock.c, server.h: Added client port number
	  to socket obj name.

	* : Updated src file banner.

	* client-tty.c: Changed msg to reflect that a broadcast to one console
	  is treated like a normal interactive connection to a single console.

	* server-obj.c, client-conf.c, server-conf.c: Added check to ensure
	  list exists before calling list_destroy().

	* server-sock.c: Initial support for broadcast connect.  Refactored
	  process_client() and create_req().  Ensured req->host is never NULL.

	* server.h: Tweaked comments.

2001-05-23  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c, client-tty.c, conman.h: Modified client to display
	  msg when console opened/closed/suspended/resumed/terminated by peer.

2001-05-22  Chris Dunlap  <cdunlap@llnl.gov>

	* INSTALL: New (from autoconf-2.50).

	* auxdir/install-sh, auxdir/config.guess, auxdir/config.sub,
	  config.h.in, configure: Updated to autoconf-2.50.

	* conman.h: Changed MAX_BUF_SIZE from 4096 to 8192.

	* config.h.in, configure, configure.in, util.c: Added check for
	  localtime_r().

	* list.c, list.h: Added list_peek().

2001-05-21  Chris Dunlap  <cdunlap@llnl.gov>

	* client.h: Reformatted client_conf_t struct.

	* client-tty.c, client.h: Added option to suspend client.

	* client-sock.c, client.c, client.h, conman.h, server-sock.c:
	  Changed client/server protocol to return names of selected consoles
	  in the "OK" response header.

2001-05-18  Chris Dunlap  <cdunlap@llnl.gov>

	* server-sock.c: Fixed bug in query_consoles() regex-matching so
	  patterns are now anchored.

	* client-conf.c: Removed 'E' cmd-line option to disable esc char.

	* : Released 0.0.3.

	* server-conf.c, server-obj.c, server.c, server.h: Revamped obj
	  routines.  Changed obj behavior so objs are always open to their fd.
	  Checked to ensure console is a tty device.  Added optimization to
	  read_from_obj() that primes objs for write_to_obj().  Added return
	  value to write_to_obj() to indicate whether obj is at EOF with buffer
	  flushed and ready for destruction by mux_io() loop.

	* server-sock.c: Added checks to validate_req().  Added support for
	  CONNECT cmd (w/o BROADCAST).  Added support for MONITOR cmd.

	* client-conf.c, client-sock.c, client-tty.c: Twiddled format of
	  output messages.

	* util.c, util.h: Added create_time_delta_string().

2001-05-16  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.0.2.

	* client-tty.c: Fixed bug that allowed characters to be transmitted
	  to server during MONITOR cmd (where server discarded them anyways).

2001-05-15  Chris Dunlap  <cdunlap@llnl.gov>

	* client-sock.c: Fixed bug in send_req() that sent OPTION and
	  BROADCAST tokens as strings by mistakenly enclosing them in quotes.

	* server.c: Fixed bug in comment.

	* server.c, server.h, server-sock.c: Fixed bug caused by accept()
	  being called outside of mux_io()'s select() loop.

2001-05-14  Chris Dunlap  <cdunlap@llnl.gov>

	* client.h, client-conf.c, client-sock.c, client-tty.c: Added msg
	  indicating if connection was terminated by peer.  Changed client
	  behavior to initiate active close of connection so it would enter
	  TIME_WAIT instead of server (unless connection terminated by peer).

	* server-sock.c: Fixed bug where client socket connection was not
	  closed on error (thereby causing client to hang in
	  display_data:read).

	* : Released 0.0.1.

	* client-conf.c, client-tty.c, server-conf.c, server-obj.c,
	  server-sock.c, server.c, server.h: Support for QUERY and CONNECT.

	* config.h.in, configure, configure.in, list.h, list.c:
	  Added USE_THREAD_SAFE_LIST def.

	* Makefile.in: Twiddled 'clean' target.

	* lex.c, lex.h: Twiddled dox.

2001-05-11  Chris Dunlap  <cdunlap@llnl.gov>

	* client-conf.c, client-sock.c, client-tty.c, client.h, conman.h,
	  server-conf.c, server-obj.c, server-sock.c, server.c, server.h:
	  Initial implementation of CONNECT cmd.

	* util.c: Twiddled comments.

	* errors.c: Added <stdlib.h> include for exit().

	* errors.h: Fixed bug in LDPRINTF macro.

	* lex.c: Added assertion & comments to lex_encode() & lex_decode().
	  Added <string.h> include for memcpy().

2001-05-09  Chris Dunlap  <cdunlap@llnl.gov>

	* client.h, conman.h, errors.c, server-obj.c, server-sock.c, server.c,
	  server.h, util.c, client-conf.c, client-sock.c, client-tty.c,
	  client.c: Initial implementation of QUERY cmd.

	* lex.c, lex.h: Added lex_encode() & lex_decode().

	* list.c: Replaced iterator chain while-loops with for-loops.

2001-05-07  Chris Dunlap  <cdunlap@llnl.gov>

	* list.c: Fixed insertion/deletion routines for multiple iterators.

2001-05-04  Chris Dunlap  <cdunlap@llnl.gov>

	* : Initial commit.
